<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Alison Hill w/ minor tweaks by Steven Bedrick" />


<title>Lab 03: Colors with Animal Sounds</title>

<script src="site_libs/header-attrs-2.1/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CS631 Labs, Spring 2020</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="slides.html">Slides &amp; Reading</a>
</li>
<li>
  <a href="data-vis-resources.html">Resources</a>
</li>
<li>
  <a href="https://sakai.ohsu.edu/portal/site/CS-631-1-31934-Sp20">Sakai</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Lab 03: Colors with Animal Sounds</h1>
<h3 class="subtitle">CS631</h3>
<h4 class="author">Alison Hill w/ minor tweaks by Steven Bedrick</h4>

</div>


<div id="overview" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Overview</h1>
<p>There are 10 challenges total- none are in the “continuous colors” section, but you can use that section to complete the tenth challenge on your own. Upload your knitted html document by next Wednesday to Sakai!</p>
<p>Note that this lab depends on <em>many</em> packages; on the RStudio Cloud project for the lab deliverable, I have pre-installed them all (I think). We’ve left the installation instructions here in the lab document for demonstration purposes.</p>
</div>
<div id="slides-for-today" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Slides for today</h1>
<pre class="r"><code>knitr::include_url(&quot;slides/03-slides.html&quot;)</code></pre>
<iframe src="slides/03-slides.html" width="672" height="400px">
</iframe>
</div>
<div id="packages" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Packages</h1>
<p>Other packages will be needed to be installed as you go- reveal the first code chunks when in doubt!</p>
<pre class="r"><code>library(tidyverse)</code></pre>
</div>
<div id="read-in-the-data" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Read in the data</h1>
<p>Use this code chunk to read in the data available at <a href="http://bit.ly/cs631-meow">http://bit.ly/cs631-meow</a>:</p>
<pre class="r"><code>sounds &lt;- read_csv(&quot;http://bit.ly/cs631-meow&quot;)</code></pre>
<p>Or store it locally:</p>
<pre class="r"><code>sounds &lt;- read_csv(here::here(&quot;data&quot;, &quot;animal_sounds_summary.csv&quot;))</code></pre>
</div>
<div id="colour-vs-fill-aesthetic" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Colour vs fill aesthetic</h1>
<p>Fill and colour scales in ggplot2 can use the same palettes. Some shapes such as lines only accept the colour aesthetic, while others, such as polygons, accept both colour and fill aesthetics. In the latter case, the colour refers to the border of the shape, and the fill to the interior.</p>
<p><img src="03-colors_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<hr />
<p>All symbols have a foreground colour, so if we add <code>color = "navy"</code>, they all are affected.</p>
<pre class="r"><code>s + geom_point(aes(shape = z), size = 4, colour = &quot;navy&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<hr />
<p>While all symbols have a foreground colour, symbols 21-25 also take a background colour (fill). So if we add <code>fill = "orchid"</code>, only the last row of symbols are affected.</p>
<pre class="r"><code>s + geom_point(aes(shape = z), size = 4, colour = &quot;navy&quot;, fill = &quot;orchid&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="data" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Data</h1>
<p>For the rest of today, we’ll play with the <code>sounds</code> dataset. This data was derived from the R package <a href="http://langcog.github.io/wordbankr/"><code>wordbankr</code></a>, an R interface to access <a href="http://wordbank.stanford.edu">Wordbank</a>- an open source database of children’s vocabulary development. The tool used to measure children’s language and communicative development in this database is the <a href="http://mb-cdi.stanford.edu">MacArthur-Bates Communicative Development Inventories (MB-CDI)</a>. The MD-CDI is a parent-reported questionnaire.</p>
<p>Here is a glimpse of the data:</p>
<pre class="r"><code>glimpse(sounds)</code></pre>
<pre><code>Observations: 33
Variables: 7
$ age             &lt;dbl&gt; 8, 8, 8, 9, 9, 9, 10, 10, 10, 11, 11, 11, 12, 12, 12,…
$ sound           &lt;chr&gt; &quot;cockadoodledoo&quot;, &quot;meow&quot;, &quot;woof woof&quot;, &quot;cockadoodledo…
$ kids_produce    &lt;dbl&gt; 1, 0, 3, 0, 2, 2, 0, 5, 4, 0, 5, 12, 0, 12, 28, 9, 12…
$ kids_understand &lt;dbl&gt; 3, 10, 12, 2, 21, 22, 9, 41, 40, 4, 36, 32, 16, 59, 5…
$ kids_respond    &lt;dbl&gt; 35, 35, 35, 91, 93, 93, 139, 145, 143, 94, 94, 94, 14…
$ prop_produce    &lt;dbl&gt; 0.02857143, 0.00000000, 0.08571429, 0.00000000, 0.021…
$ prop_understand &lt;dbl&gt; 0.08571429, 0.28571429, 0.34285714, 0.02197802, 0.225…</code></pre>
<p>Note that the unit of observation here is one-row-per-age-group/animal sound.</p>
<p>Variables you need for this lab:</p>
<ul>
<li><code>age</code>: child age in months</li>
<li><code>sound</code>: a string describing a type of animal sound</li>
<li><code>kids_produce</code>: the number of parents who answered “yes, my child produces this animal sound” (note that if the child produces a sound it is assumed that they understand it as well)</li>
<li><code>kids_respond</code>: the number of parents who responded to this question at all</li>
<li><code>prop_produce</code>: the proportion of kids whose parents endorsed that their child produces this animal sound, out of all questionnaires administered (i.e., <code>kids_produce / kids_respond</code>)</li>
</ul>
<p>Other variables in this dataset:</p>
<ul>
<li><code>kids_understand</code>: the number of parents who answered “yes, my child understands what this animal sound means” (note that a child can understand the sound but not produce it)</li>
<li><code>prop_understand</code>: the proportion of kids whose parents endorsed that their child understands this animal sound, out of all questionnaires administered (i.e., <code>kids_understand / kids_respond</code>)</li>
</ul>
</div>
<div id="discrete-vs-continuous-variables" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> Discrete vs continuous variables</h1>
<div class="panel panel-primary">
<div class="panel-heading">
Refresher Content:
</div>
<div class="panel-body">
<p>For a refresher (and more detailed deep-dive), check out: <a href="https://stats.idre.ucla.edu/other/mult-pkg/whatstat/what-is-the-difference-between-categorical-ordinal-and-numerical-variables/">“WHAT IS THE DIFFERENCE BETWEEN CATEGORICAL, ORDINAL AND NUMERICAL VARIABLES?”</a></p>
</div>
</div>
<p>In order to use color with your data, most importantly, you need to know if you’re dealing with discrete or continuous variables.</p>
<div id="discrete-color-palettes" class="section level2" number="7.1">
<h2 number="7.1"><span class="header-section-number">7.1</span> Discrete color palettes</h2>
<p>Discrete color palettes work best when you want to color by a qualitative variable. Qualitative variables tend to be either categorical or ordinal. Different variables can be qualitative or quantitative depending on context.</p>
<p>In this dataset, <code>sound</code> is a categorical variable with 3 possible values:</p>
<pre class="r"><code>sounds %&gt;% 
  distinct(sound) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">sound</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cockadoodledoo</td>
</tr>
<tr class="even">
<td align="left">meow</td>
</tr>
<tr class="odd">
<td align="left">woof woof</td>
</tr>
</tbody>
</table>
<p>We could map arbitrary numbers onto each of these sounds, like 1, 2, and 3- but the numbers still would not mean anything. That is, there is no intrinsic ordering to these categories. Examples of common pure categorical variables are race or ethnicity, gender, hair color, eye color, etc. Coloring by sound is used as a way to <em>distinguish</em> the data for different sounds from each other (read more here: <a href="http://serialmentor.com/dataviz/color-basics.html#color-as-a-tool-to-distinguish" class="uri">http://serialmentor.com/dataviz/color-basics.html#color-as-a-tool-to-distinguish</a>)</p>
</div>
<div id="continuous-color-palettes" class="section level2" number="7.2">
<h2 number="7.2"><span class="header-section-number">7.2</span> Continuous color palettes</h2>
<p>Continuous color palettes work best when you want to color by a quantitative variable. Quantitative variables tend to be either ordinal or continuous. In this dataset, <code>age</code> (in months) can only take on a limited set of values:</p>
<pre class="r"><code>sounds %&gt;% 
  distinct(age) %&gt;% 
  pull</code></pre>
<pre><code> [1]  8  9 10 11 12 13 14 15 16 17 18</code></pre>
<p>However, in the following plots, we’ll treat age as a continuous variable plotted across the x-axis. In some contexts, this kind of variable could be treated as a ordinal variable. However, for color purposes, this would not ideal here since there are 11 “categories” (see <a href="http://serialmentor.com/dataviz/color-pitfalls.html" class="uri">http://serialmentor.com/dataviz/color-pitfalls.html</a>). Age has a natural and meaningful order: a child who is 9 months old is 1 month older than one who is 8 months old. So, we’ll use that natural ordering to our advantage and not use color to represent age as a variable. When you <em>do</em> apply a continuous color palette, you’ll want to use color to your advantage to <a href="http://serialmentor.com/dataviz/color-basics.html#color-to-represent-data-values">represent data values</a>.</p>
</div>
</div>
<div id="know-your-data" class="section level1" number="8">
<h1 number="8"><span class="header-section-number">8</span> Know your data</h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #1:
</div>
<div class="panel-body">
<ul>
<li><p>How many variables?</p>
<ul>
<li>Which variables are continuous?</li>
<li>Which ones are categorical or ordinal?</li>
</ul></li>
<li><p>How many total kids do we have data for?</p></li>
<li><p>How many ages (in months)?</p>
<ul>
<li>How many kids per age?</li>
</ul></li>
<li><p>How many types of animal sounds? What are they?</p>
</div></li>
</ul>
</div>
<p>Let’s start just by getting a feel for how many kids produce each kind of sound, across the full age range. We could make a table:</p>
<pre class="r"><code>sounds %&gt;% 
  group_by(sound) %&gt;% 
  summarize(total_produce = sum(kids_produce)) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">sound</th>
<th align="right">total_produce</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cockadoodledoo</td>
<td align="right">148</td>
</tr>
<tr class="even">
<td align="left">meow</td>
<td align="right">681</td>
</tr>
<tr class="odd">
<td align="left">woof woof</td>
<td align="right">940</td>
</tr>
</tbody>
</table>
<p>Or we could make a simple bar plot:</p>
<pre class="r"><code>ggplot(sounds, aes(x = sound, y = kids_produce)) + 
  geom_col() +
  labs(x = &quot;Sound&quot;, y = &quot;Total Children Producing&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>For this kind of plot, we don’t really need color. What if we want to see how the number of kids who produce each sound varies by age? We’ll change the x-axis to age and instead <code>facet_wrap</code> by <code>sound</code>, and make the y-axis a proportion instead of counts.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_col() +
  labs(x = &quot;Age (mos)&quot;, y = &quot;Proportion of Children Producing&quot;) +
  facet_wrap(~sound)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>The bar geom makes this a little hard to read and compare across facets though. Let’s try points instead.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_point() +
  labs(x = &quot;Age (mos)&quot;, y = &quot;Proportion of Children Producing&quot;) +
  facet_wrap(~sound)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>That is a little better! Facets allow us to parse the relationship between two quantitative variables (here, age and proportion of kids producing) by a qualitative variable (here, type of sound). Another way we could do this, instead of facetting, is to use color. This would make it easier to compare proportions at each age.</p>
</div>
<div id="discrete-colors" class="section level1" number="9">
<h1 number="9"><span class="header-section-number">9</span> Discrete colors</h1>
<p>Let’s start with a base plot with age (in months) along the x-axis and the proportion of children producing each word along the y-axis, using points as the geometric object. Set the size of the points to 2 and change the x- and y-axis labels to “Age (months)” and “Proportion of Children Producing”, respectively.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div id="default-discrete-palette" class="section level2" number="9.1">
<h2 number="9.1"><span class="header-section-number">9.1</span> Default discrete palette</h2>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #2:
</div>
<div class="panel-body">
<p>Take the plot we just made, and edit the code to map the color of the points to the type of sound produced <em>at the geom level</em>. The colors that show up are the default discrete palette in <code>ggplot2</code>.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_point(aes(color = sound), size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;)</code></pre>
<img src="03-colors_files/figure-html/unnamed-chunk-16-1.png" width="672" />
</div>
</div>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #3:
</div>
<div class="panel-body">
<p>Try adding <code>geom_line()</code> to this plot to connect the dots. Does this look right? Use <code>?geom_line</code> to figure out how this geom connects the dots by default, and which aesthetic can be used to connect cases together. Try editing your code to draw 3 black lines- one for each sound.</p>
<pre class="r"><code># Does this look right? no!
ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_line() +
  geom_point(aes(color = sound), size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code># A possible solution
ggplot(sounds, aes(x = age, y = prop_produce)) + 
  geom_line(aes(group = sound)) +
  geom_point(aes(color = sound), size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
</div>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #4:
</div>
<div class="panel-body">
<p>Make two plots:</p>
<ol style="list-style-type: decimal">
<li><p>Recreate the plot above, but this time map color to the type of sound produced for both the point and line geoms. Pay attention to the order of the layers you are adding- you may wish to place <code>geom_line</code> <em>before</em> <code>geom_point</code> so the lines are always “painted” underneath the points.</p></li>
<li><p>Instead of <code>geom_line</code>, add a loess line using <code>geom_smooth</code>. Use <code>?geom_smooth</code> to figure out how to get rid of the grey standard error ribbon. You may also want to increase the line width.</p></li>
</ol>
<pre class="r"><code># Does this look right? yes!
ggplot(sounds, aes(x = age, y = prop_produce, color = sound)) + 
  geom_line() +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                         y = prop_produce, 
                         color = sound)) + 
  geom_smooth(se = FALSE, lwd = .5) +
  geom_point(size = 2)  +
  labs(x = &quot;Age (months)&quot;, y = &quot;Proportion of Children Producing&quot;) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
</div>
</div>
<p>Why does this work? To tell <code>geom_line</code> how to connect your dots, you can either:</p>
<ul>
<li>Map the <code>group</code> aesthetic (so <code>aes(group = sound)</code>), or</li>
<li>Map the <code>color</code> aesthetic globally (<code>aes(color = sound)</code>.</li>
</ul>
<p>Because <code>geom_line</code> understands the <code>color</code> aesthetic, it will try to draw separate lines for each color. Here that translates to three lines, one for each sound, which is what we want!</p>
</div>
<div id="brief-aside-factors" class="section level2" number="9.2">
<h2 number="9.2"><span class="header-section-number">9.2</span> Brief aside: factors</h2>
<p>At this point, our plot is looking pretty good. But you may have noticed that the legend order doesn’t match the lines. We can fix that using the <a href="http://forcats.tidyverse.org"><code>forcats</code> package</a>, which is <code>for</code> <code>cat</code>egorical variables. There are lots of functions in <code>forcats</code>, and you can install &amp; load it separately, although <code>forcats</code> is loaded with the <code>tidyverse</code>.</p>
<pre class="r"><code>install.packages(&quot;forcats&quot;)
library(forcats)</code></pre>
<p>We’ll use the <code>fct_reorder2</code> function, which works for when you have a line chart of two quantitative variables, colored by a factor variable. Let’s see the difference.</p>
<pre class="r"><code>sounds &lt;- sounds %&gt;% 
  mutate(sound = as.factor(sound))

sound_traj &lt;- ggplot(sounds, aes(x = age, 
                         y = prop_produce, 
                         color = fct_reorder2(sound, age, prop_produce))) +
  geom_smooth(se = FALSE, lwd = .5) +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       color = &quot;sound&quot;)
sound_traj</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>MUCH BETTER! Save your plot object as <code>sound_traj</code>. Now we can start playing with the actual colors.</p>
</div>
<div id="set-luminance-and-saturation-chromaticity" class="section level2" number="9.3">
<h2 number="9.3"><span class="header-section-number">9.3</span> Set luminance and saturation (chromaticity)</h2>
<p>The default qualitative palette works fine here. The addition of <a href="http://ggplot2.tidyverse.org/reference/scale_hue.html"><code>scale_color_hue</code></a> changes nothing.</p>
<pre class="r"><code>sound_traj +
  scale_color_hue()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>We can also change these settings within the default color palette, where the arguments are:</p>
<ul>
<li><code>h</code> = range of hues to use, in [0, 360]</li>
<li><code>l</code> = luminance (lightness)</li>
<li><code>c</code> = chroma (intensity of color)</li>
</ul>
<pre class="r"><code># Change hue (l and c are defaults)
sound_traj +
  scale_color_hue(h = c(0, 90), l = 65, c = 100)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<pre class="r"><code># Use luminance=45, instead of default 65
sound_traj +
  scale_color_hue(l = 45)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-23-2.png" width="672" /></p>
<pre class="r"><code># Reduce saturation (chroma) from 100 to 50, and increase luminance
sound_traj +
  scale_color_hue(l = 75, c = 50)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-23-3.png" width="672" /></p>
</div>
<div id="set-discrete-colors" class="section level2" number="9.4">
<h2 number="9.4"><span class="header-section-number">9.4</span> Set discrete colors</h2>
<p>We can change the actual colors used by adding the layer <code>scale_color_manual</code> or <code>scale_fill_manual</code>. Confusion between which to use when is often the cause of much frustration!</p>
<p>To name more than one color, which you often want to do, use <code>c()</code>. In the parentheses, named colors and hex colors are always in quotes.</p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = c(&quot;cornflowerblue&quot;, 
                                &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>There are many <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">named colors</a> available in R!</p>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #5:
</div>
<div class="panel-body">
<p>View the code blocks below. Copy and paste the code to run them in your own file. Why do neither of the following code blocks change the colors of the points and lines? Use your words :) <em>(the answer is below the challenge, but try to trouble-shoot on your own first)</em></p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                         y = prop_produce, 
                         color = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(se = FALSE, lwd = .5) +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       color = &quot;sound&quot;) +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                         y = prop_produce, 
                         fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(se = FALSE, lwd = .5) +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<img src="03-colors_files/figure-html/unnamed-chunk-26-1.png" width="672" />
</div>
</div>
<p>Answers:</p>
<ul>
<li>In the first, we used <code>scale_fill_manual</code>, but the in the global aesthetics, we mapped the <code>color</code>, not <code>fill</code>, aesthetic onto the <code>sound</code> variable.</li>
<li>In the second, we did define the <code>fill</code> aesthetic and used <code>scale_fill_manual</code>, so that is good. But <code>geom_line</code> only understands the <code>color</code> aesthetic, not <code>fill</code>. And for <code>geom_point</code>, the default shape for is 19, which does not understand the <code>fill</code> aesthetic.</li>
</ul>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #6:
</div>
<div class="panel-body">
<p>Start with this plot:</p>
<pre class="r"><code>sound_traj</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Add a black outline to the points, and color the inside of the points and the lines by <code>sound</code> using the default discrete color palette. You may also wish to edit the legends on this plot: <code>geom_smooth</code> has an argument called <code>show.legend = FALSE</code>. See if you prefer the plot with this change.</p>
<p>If this was easy, try applying the same custom color palette to the inside of the points and to the lines.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(color = fct_reorder2(sound, age, prop_produce)),
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(color = fct_reorder2(sound, age, prop_produce)),
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;)) +
  scale_color_manual(values = c(&quot;cornflowerblue&quot;, 
                               &quot;seagreen&quot;, &quot;coral&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
</div>
<p>You can also define your color palette as a vector outside of <code>ggplot2</code>. Below, I made an object called <code>my_colors</code> outside of <code>ggplot2</code>. To use it, we call that object within the <code>scale_colour_manual</code> function.</p>
<pre class="r"><code>my_colors &lt;- c(&quot;cadetblue&quot;, &quot;steelblue&quot;, &quot;salmon&quot;) # quote color names
sound_traj +
  scale_color_manual(values = my_colors) # note: not in quotes</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #7:
</div>
<div class="panel-body">
<p>Define a custom color palette using hexadecimal colors (#rrggbb), and apply it using <code>scale_color_manual</code> to your <code>sound_traj</code> plot. Some basic ones are here:</p>
<p><a href="https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/" class="uri">https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/</a></p>
<p>Parse the hexadecimal string like so: #rrggbb, where rr, gg, and bb refer to color intensity in the red, green, and blue channels, respectively.</p>
<pre class="r"><code># from https://github.com/mwaskom/seaborn/blob/master/seaborn/palettes.py
sb_colorblind &lt;- c(&quot;#0072B2&quot;, &quot;#009E73&quot;, &quot;#D55E00&quot;,
                        &quot;#CC79A7&quot;, &quot;#F0E442&quot;, &quot;#56B4E9&quot;)
sound_traj +
  scale_colour_manual(values = sb_colorblind)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="built-in-discrete-palettes" class="section level2" number="9.5">
<h2 number="9.5"><span class="header-section-number">9.5</span> Built-in discrete palettes</h2>
<div id="colorbrewer" class="section level3" number="9.5.1">
<h3 number="9.5.1"><span class="header-section-number">9.5.1</span> Colorbrewer</h3>
<p>To use Colorbrewer palettes, you’ll need to install the <code>RColorBrewer</code> package from CRAN. This chunk of code tells you how:</p>
<pre class="r"><code>install.packages(&quot;RColorBrewer&quot;)
library(RColorBrewer)</code></pre>
<p>Colorbrewer has a few qualitative palettes named: Accent, Dark2, Paired, Pastel1, Pastel2, Set1, Set2, Set3. Here is how to view them:</p>
<pre class="r"><code>brewer.pal(5, &quot;Dark2&quot;) # list 5 hex colors</code></pre>
<pre><code>[1] &quot;#1B9E77&quot; &quot;#D95F02&quot; &quot;#7570B3&quot; &quot;#E7298A&quot; &quot;#66A61E&quot;</code></pre>
<pre class="r"><code>display.brewer.pal(5, &quot;Dark2&quot;) # view 5 hex colors</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>And here is how you use them:</p>
<pre class="r"><code>sound_traj +
  scale_color_brewer(palette = &quot;Dark2&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
</div>
<div id="wes-anderson-palettes" class="section level3" number="9.5.2">
<h3 number="9.5.2"><span class="header-section-number">9.5.2</span> Wes Anderson palettes</h3>
<p>My favorite! To use Wes Anderson palettes, you’ll need to install the <code>wesanderson</code> package from CRAN. This chunk of code tells you how:</p>
<pre class="r"><code>install.packages(&quot;wesanderson&quot;)
library(wesanderson)</code></pre>
<pre class="r"><code>names(wes_palettes) # all the palette names</code></pre>
<pre><code> [1] &quot;BottleRocket1&quot;  &quot;BottleRocket2&quot;  &quot;Rushmore1&quot;      &quot;Rushmore&quot;      
 [5] &quot;Royal1&quot;         &quot;Royal2&quot;         &quot;Zissou1&quot;        &quot;Darjeeling1&quot;   
 [9] &quot;Darjeeling2&quot;    &quot;Chevalier1&quot;     &quot;FantasticFox1&quot;  &quot;Moonrise1&quot;     
[13] &quot;Moonrise2&quot;      &quot;Moonrise3&quot;      &quot;Cavalcanti1&quot;    &quot;GrandBudapest1&quot;
[17] &quot;GrandBudapest2&quot; &quot;IsleofDogs1&quot;    &quot;IsleofDogs2&quot;   </code></pre>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;) # view named palette</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;)[1:4] # list first 4 hex colors</code></pre>
<pre><code>[1] &quot;#E6A0C4&quot; &quot;#C6CDF7&quot; &quot;#D8A499&quot; &quot;#7294D4&quot;</code></pre>
<pre class="r"><code>wes_palette(&quot;GrandBudapest2&quot;)[c(1,4)] # list colors 1 and 4</code></pre>
<pre><code>[1] &quot;#E6A0C4&quot; &quot;#7294D4&quot;</code></pre>
<p>To use these palettes, use <code>scale_color_manual</code> where <code>values</code> is set to <code>wes_palette("name")</code>. For example:</p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = wes_palette(&quot;Darjeeling1&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = wes_palette(&quot;FantasticFox1&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-37-2.png" width="672" /></p>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #8:
</div>
<div class="panel-body">
<p>What if you just don’t want to use the colors in the order they are in? Use a <code>wes_palette</code> of your choice. Using our code from above, try picking the last 3 colors of a palette. Add it to your <code>sound_traj</code> plot.</p>
<p>If this was easy, try using colors 2, 3, and 5 instead.</p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = wes_palette(&quot;Darjeeling1&quot;)[3:5])</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = wes_palette(&quot;FantasticFox1&quot;)[c(2, 3, 5)])</code></pre>
<img src="03-colors_files/figure-html/unnamed-chunk-38-2.png" width="672" />
</div>
</div>
</div>
<div id="ggthemes-palettes" class="section level3" number="9.5.3">
<h3 number="9.5.3"><span class="header-section-number">9.5.3</span> <code>ggthemes</code> palettes</h3>
<p>To use these palettes, you’ll need to install the <code>ggthemes</code> package from CRAN. This chunk of code tells you how:</p>
<pre class="r"><code>install.packages(&quot;ggthemes&quot;)
library(ggthemes)</code></pre>
<pre class="r"><code>sound_traj +
  scale_color_fivethirtyeight()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<pre class="r"><code>sound_traj +
  scale_color_economist()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-40-2.png" width="672" /></p>
</div>
<div id="palettes-from-the-queen-bee" class="section level3" number="9.5.4">
<h3 number="9.5.4"><span class="header-section-number">9.5.4</span> Palettes from the Queen Bee</h3>
<p>To use <a href="https://github.com/dill/beyonce">Beyonce palettes</a>, you’ll need to install the <code>beyonce</code> package from GitHub using <code>devtools::install_github()</code>. This chunk of code tells you how:</p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;dill/beyonce&quot;)
library(beyonce)</code></pre>
<p>Note that a number of students had installation problems with this package! Move on if you do.</p>
<pre class="r"><code>beyonce_palette(18)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = beyonce_palette(18)[3:5])</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>Here we’ll only use the first, fourth, and fifth colors in the palette.</p>
<pre class="r"><code>sound_traj +
  scale_color_manual(values = beyonce_palette(18)[c(1, 4, 5)])</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
<div id="viridis-palettes" class="section level3" number="9.5.5">
<h3 number="9.5.5"><span class="header-section-number">9.5.5</span> Viridis palettes</h3>
<blockquote>
<p>“Use the color scales in this package to make plots that are pretty, better represent your data, easier to read by those with colorblindness, and print well in grey scale.”</p>
</blockquote>
<p>To use, you’ll need to install the <code>viridis</code> package from CRAN. This chunk of code tells you how:</p>
<pre class="r"><code>install.packages(&quot;viridis&quot;)
library(viridis)</code></pre>
<p>Read more here in the <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">viridis vignette</a>. The default argument for <code>discrete</code> is FALSE, so to use the discrete palettes you need to set <code>discrete = TRUE</code>. There are four colormap options available:</p>
<ul>
<li>“magma” (or “A”),</li>
<li>“inferno” (or “B”),</li>
<li>“plasma” (or “C”),</li>
<li>“viridis” (or “D”, the default option).</li>
</ul>
<pre class="r"><code>sound_traj +
  scale_color_viridis(discrete = TRUE) +
  theme_minimal()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
<pre class="r"><code>sound_traj +
  scale_color_viridis(discrete = TRUE, option = &quot;plasma&quot;) +
  theme_minimal()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-46-2.png" width="672" /></p>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #9:
</div>
<div class="panel-body">
<p>Use the <code>viridis</code> package to color the points by and the lines by <code>sound</code>; make the outline of the points “midnightblue”. Pick any colormap option, and play with <code>theme_bw</code> or <code>theme_minimal</code> to see what you like.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(color = fct_reorder2(sound, age, prop_produce)),
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21, colour = &quot;midnightblue&quot;) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_viridis(discrete = TRUE) +
  scale_color_viridis(discrete = TRUE) +
  theme_minimal()</code></pre>
<img src="03-colors_files/figure-html/unnamed-chunk-47-1.png" width="672" />
</div>
</div>
</div>
</div>
<div id="greyscale-for-discrete" class="section level2" number="9.6">
<h2 number="9.6"><span class="header-section-number">9.6</span> Greyscale for discrete</h2>
<p>Use <code>scale_color_grey</code> or <code>scale_fill_grey</code>, or sometimes both depending on your geoms and the aesthetics they understand.</p>
<pre class="r"><code>sound_traj +
  scale_color_grey() +
  theme_minimal()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p>Set start and end</p>
<pre class="r"><code>sound_traj +
  scale_color_grey(start = 0.2, end = .8) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>Make the same plot but make points outlined in black</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(color = fct_reorder2(sound, age, prop_produce)),
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_grey(start = 0.3, end = 1) +
  scale_color_grey(start = 0.3, end = 1) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p>Suggest redundancy in greyscale- try changing line type instead of line (or in addition to) line color.</p>
<p>Change line type by <code>sound</code>, set color to black.</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(lty = fct_reorder2(sound, age, prop_produce)), color = &quot;black&quot;,
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_grey(start = 0.3, end = 1) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<p>Change both!</p>
<pre class="r"><code>ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   fill = fct_reorder2(sound, age, prop_produce))) + 
  geom_smooth(aes(color = fct_reorder2(sound, age, prop_produce),
                  lty = fct_reorder2(sound, age, prop_produce)),
              se = FALSE, lwd = .5, show.legend = FALSE) +
  geom_point(size = 2, shape = 21) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;, 
       fill = &quot;sound&quot;) +
  scale_fill_grey(start = 0.3, end = .8) +
  scale_color_grey(start = 0.3, end = .8) </code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
</div>
<div id="colorblind-friendly-palettes" class="section level2" number="9.7">
<h2 number="9.7"><span class="header-section-number">9.7</span> Colorblind-friendly palettes</h2>
<p>The <a href="https://github.com/clauswilke/colorblindr"><code>colorblindr</code> package</a> can be used to “simulate colorblindness in production-ready R figures.” To use this package, you’ll need to first install the <code>cowplot</code> package from GitHub using <code>devtools::install_github()</code>. You’ll also need to install the <code>colorspace</code> package from CRAN. Finally, you can then use <code>devtools::install_github()</code> again to install the <code>colorblindr</code> package. This code chunk shows you how to do all 3 installs to use the <code>colorblindr</code> package:</p>
<pre class="r"><code>devtools::install_github(&quot;wilkelab/cowplot&quot;)
install.packages(&quot;colorspace&quot;, repos = &quot;http://R-Forge.R-project.org&quot;)
devtools::install_github(&quot;clauswilke/colorblindr&quot;)</code></pre>
<p>To use:</p>
<pre class="r"><code># save a ggplot object
my_sound_traj &lt;- sound_traj +
  scale_color_manual(values = beyonce_palette(18)[c(1, 4, 5)])</code></pre>
<p>View that figure after color-vision-deficiency simulation:</p>
<pre class="r"><code>library(colorblindr)
cvd_grid(my_sound_traj)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<p>You can also use the colorblind-friendly palette in this package using <code>scale_color_OkabeIto</code> and <code>scale_fill_OkabeIto</code>:</p>
<pre class="r"><code>cb_sound_traj &lt;- sound_traj +
  scale_color_OkabeIto()

cb_sound_traj</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<pre class="r"><code>cvd_grid(cb_sound_traj)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-56-2.png" width="672" /></p>
<p>You can still use this colorblind-friendly palette without the <code>colorblindr</code> package though. <a href="http://jfly.iam.u-tokyo.ac.jp/color/">Here</a> are the colors!</p>
<p><img src="http://jfly.iam.u-tokyo.ac.jp/color/image/pallete.jpg" /></p>
<p>The <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/#a-colorblind-friendly-palette">Cookbook for R</a> provided the matching hex colors too to make life easier:</p>
<pre class="r"><code>cbbPalette &lt;- c(&quot;#000000&quot;, &quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#009E73&quot;, &quot;#F0E442&quot;, &quot;#0072B2&quot;, &quot;#D55E00&quot;, &quot;#CC79A7&quot;)

# To use for line and point colors, add
sound_traj +
  scale_colour_manual(values = cbbPalette[c(3, 7, 8)])</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
</div>
<div id="repel-labels" class="section level2" number="9.8">
<h2 number="9.8"><span class="header-section-number">9.8</span> Repel labels</h2>
<pre class="r"><code>library(ggrepel)

sounds &lt;- sounds %&gt;%
  mutate(label = case_when(
    age == max(age) ~ sound))

ggplot(sounds, aes(x = age, 
                   y = prop_produce, 
                   color = fct_reorder2(sound, age, prop_produce))) +
  geom_smooth(se = FALSE, lwd = .5) +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;) +
  geom_text_repel(aes(label = label),
                  nudge_x = 1,
                  direction = &quot;y&quot;,
                  na.rm = TRUE) +
  guides(color = FALSE)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
</div>
</div>
<div id="continuous-colors" class="section level1" number="10">
<h1 number="10"><span class="header-section-number">10</span> Continuous colors</h1>
<p><em>N.B. All of the example plots below are great examples of how <strong>not</strong> to use continuous colors. I’m showing these so you can see how to work with continuous color palettes, and to make this topic flow easier for you I’m sticking with original dataset.</em></p>
<div id="default-continuous-palette" class="section level2" number="10.1">
<h2 number="10.1"><span class="header-section-number">10.1</span> Default continuous palette</h2>
<p>Let’s map color to a continuous variable. For this, we are returning to <code>geom_line</code> instead of <code>geom_smooth</code>, because the latter doesn’t respond to continuous color palettes.</p>
<pre class="r"><code>sound_by_age &lt;- ggplot(sounds, aes(x = age, 
                                   y = prop_produce, 
                                   color = age)) +
  geom_line(aes(group = sound), lwd = .5) +
  geom_point(size = 2) +
  labs(x = &quot;Age (months)&quot;, 
       y = &quot;Proportion of Children Producing&quot;)
sound_by_age</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
</div>
<div id="color-choice-with-continuous-variables" class="section level2" number="10.2">
<h2 number="10.2"><span class="header-section-number">10.2</span> Color choice with continuous variables</h2>
<p>With discrete colors, we used either <code>scale_color_manual</code> or <code>scale_fill_manual</code> (and sometimes both were needed!). For continuous colors, we use either <code>scale_color_gradient</code> or <code>scale_fill_gradient</code>.</p>
<pre class="r"><code>sound_by_age +
  scale_color_gradient()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p>You can reverse the gradient scale…</p>
<pre class="r"><code>sound_by_age +
  scale_color_gradient(trans = &quot;reverse&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<pre class="r"><code>sound_by_age +
  scale_color_gradient(low = &quot;white&quot;, high = &quot;red&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>We can make this same plot using a custom greyscale gradient.</p>
<pre class="r"><code>sound_by_age +
  scale_color_gradient(low = &quot;grey90&quot;, high = &quot;black&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>So <code>scale_color_gradient</code> gives you a sequential gradient, but you may want a diverging color scheme instead. For that, you can use <code>scale_color_gradient2</code></p>
<pre class="r"><code># Diverging color scheme
med_age &lt;- sounds %&gt;% 
  summarize(mos = median(age)) %&gt;% 
  pull()
sound_by_age +
  scale_color_gradient2(midpoint = med_age,
                      low=&quot;blue&quot;, mid=&quot;white&quot;, high=&quot;red&quot; )</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
</div>
<div id="built-in-continuous-palettes" class="section level2" number="10.3">
<h2 number="10.3"><span class="header-section-number">10.3</span> Built-in continuous palettes</h2>
<div id="use-rcolorbrewer" class="section level3" number="10.3.1">
<h3 number="10.3.1"><span class="header-section-number">10.3.1</span> Use <code>RColorBrewer</code></h3>
<p>Again, to use you need to install and load the <code>RColorBrewer</code> palette.</p>
<pre class="r"><code>library(RColorBrewer)</code></pre>
<p>Then use <code>scale_color_gradientn</code>.</p>
<pre class="r"><code>sound_by_age +
  scale_color_gradientn(colours = brewer.pal(n=5, name=&quot;PuBuGn&quot;))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>Reverse the colors…</p>
<pre class="r"><code>sound_by_age +
  scale_color_gradientn(colours = rev(brewer.pal(n=5, name=&quot;PuBuGn&quot;)))</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
</div>
<div id="viridis" class="section level3" number="10.3.2">
<h3 number="10.3.2"><span class="header-section-number">10.3.2</span> Viridis</h3>
<p>Read more here in the <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">viridis vignette</a></p>
<pre class="r"><code>library(viridis)</code></pre>
<p>The default is the <code>viridis</code> palette within the <code>viridis</code> package!</p>
<p>Note! For discrete == FALSE (the default) all other arguments are as to <code>scale_fill_gradientn</code> or <code>scale_color_gradientn</code>. (Also note that <code>_gradient_n_</code> is not a typo- the <em>n</em> versions of those functions allow multi-color gradients).</p>
<pre class="r"><code>sound_by_age +
  scale_color_viridis()</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<pre class="r"><code>sound_by_age +
  scale_color_viridis(option = &quot;magma&quot;)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<p>Read the help function for <code>?scale_color_viridis</code>. We’ll use the “inferno” palette <em>in reverse</em>.</p>
<pre class="r"><code>sound_by_age +
  scale_color_viridis(option = &quot;inferno&quot;, begin = 1, end = 0)</code></pre>
<p><img src="03-colors_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="final-challenge-10" class="section level1" number="11">
<h1 number="11"><span class="header-section-number">11</span> Final challenge (#10)</h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #10:
</div>
<div class="panel-body">
<p>Using new data, make three new plots. Use any <code>geom</code> that makes sense. The plots should:</p>
<ul>
<li>Have x- and y-axes that are each quantitative variables.</li>
<li>Apply a non-default color palette, either coloring by a qualitative variable (discrete colors) or a quantitative variable (continuous colors). This list of <a href="https://github.com/EmilHvitfeldt/r-color-palettes">R color palettes</a> has even more ideas than we could cover in class.</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>In the first plot, you must <strong>wield color carefully and effectively</strong>. The addition of the color/fill aesthetics must be done in a way that the interpretation of the plot improves. Also, you must show how your colors fare for colorblind viewers. Include 2-3 sentences about why you made the plot that you did. What questions does your plot answers (or perhaps what questions does your plot raise)?</p></li>
<li><p>In the second plot, you must <strong>make a greyscale version of your first plot!</strong> And again, it must look good and make sense.</p></li>
<li><p>In the third plot, you must <strong>use color badly</strong>. Make a plot where the colors are either redundant, confusing, or just generally non-sensical. Explain why this last visualization fails.</p>
</div></li>
</ol>
</div>
<p>Some data ideas:</p>
<ul>
<li>MacArthur-Bates Communicative Development Inventory (MB-CDI), a family of parent-report questionnaires measuring children’s vocabulary understanding and production
<ul>
<li><a href="https://cran.r-project.org/web/packages/wordbankr/index.html">R package <code>wordbankr</code></a></li>
<li>See my code <a href="03a-meow-cleaning.html">here</a></li>
</ul></li>
<li>POTUS Executive Orders
<ul>
<li><a href="https://www.federalregister.gov/executive-orders">Data</a></li>
<li>Follow Bob Rudis’ code-through <a href="https://rud.is/b/2018/04/18/examining-potus-executive-orders/">here</a></li>
</ul></li>
<li>National Electronic Injury Surveillance System (NEISS)
<ul>
<li><a href="https://github.com/hadley/neiss">R package <code>neiss</code></a></li>
<li>Follow Julia Silge’s code-through <a href="https://juliasilge.com/blog/your-floor/">here</a></li>
</ul></li>
<li>Flights
<ul>
<li><a href="https://github.com/ismayc/pnwflights14">R package <code>pnwflights14</code></a></li>
<li><a href="https://github.com/hadley/nycflights13">R package <code>nycflights13</code></a></li>
</ul></li>
<li>Building Permits
<ul>
<li>See code <a href="https://github.com/hadley/building-permits">here</a></li>
<li>Watch YouTube code-through <a href="https://www.youtube.com/watch?v=go5Au01Jrvs">here</a></li>
</ul></li>
<li>Cocktail Balance
<ul>
<li><a href="https://github.com/karnesky/cocktail-balance">Data</a></li>
</ul></li>
<li>NASA Weather
<ul>
<li><a href="https://github.com/hadley/nasaweather">Data</a></li>
</ul></li>
<li>Social Security Administration Baby Names
<ul>
<li><a href="https://cran.r-project.org/web/packages/babynames/index.html">R package <code>babynames</code></a></li>
<li>Follow Julia Silge <em>‘My Baby Boomer Name Might Have Been “Debbie”’</em>: <a href="https://juliasilge.com/blog/my-baby-boomer-name/" class="uri">https://juliasilge.com/blog/my-baby-boomer-name/</a></li>
<li>Follow Hilary Parker: <em>Hilary: The Most Poisoned Baby Name in US History</em>: <a href="https://hilaryparker.com/2013/01/30/hilary-the-most-poisoned-baby-name-in-us-history/" class="uri">https://hilaryparker.com/2013/01/30/hilary-the-most-poisoned-baby-name-in-us-history/</a></li>
</ul></li>
<li>Youth Behavior Risk Surveillance System
<ul>
<li><a href="https://github.com/hadley/yrbss">R package <code>yrbss</code></a></li>
<li>Some <a href="https://www.cdc.gov/nchhstp/newsroom/2012/yrbs-graphics2012.html">good ideas here</a></li>
</ul></li>
<li>Gun sales
<ul>
<li><a href="https://github.com/hadley/gun-sales">Data</a></li>
<li>Some <a href="https://github.com/NYTimes/gunsales/blob/master/out/plots.pdf">example plots here</a></li>
</ul></li>
<li>Gapminder
<ul>
<li><a href="https://cran.r-project.org/web/packages/gapminder/index.html">R package <code>gapminder</code></a></li>
<li>Some <a href="https://github.com/jennybc/ggplot2-tutorial/blob/master/gapminder-ggplot2-scatterplot.md">example plots here</a></li>
</ul></li>
</ul>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTGFiIDAzOiBDb2xvcnMgd2l0aCBBbmltYWwgU291bmRzIgpzdWJ0aXRsZTogIkNTNjMxIgphdXRob3I6ICJBbGlzb24gSGlsbCB3LyBtaW5vciB0d2Vha3MgYnkgU3RldmVuIEJlZHJpY2siCm91dHB1dDoKICBodG1sX2RvY3VtZW50OgogICAgdGhlbWU6IGZsYXRseQogICAgdG9jOiBUUlVFCiAgICB0b2NfZmxvYXQ6IFRSVUUKICAgIHRvY19kZXB0aDogMgogICAgbnVtYmVyX3NlY3Rpb25zOiBUUlVFCiAgICBjb2RlX2ZvbGRpbmc6IGhpZGUKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKLS0tCmBgYHtyIHNldHVwLCBpbmNsdWRlID0gRkFMU0UsIGNhY2hlID0gRkFMU0V9CmtuaXRyOjpvcHRzX2NodW5rJHNldChlcnJvciA9IFRSVUUsIGNvbW1lbnQgPSBOQSwgd2FybmluZyA9IEZBTFNFLCBlcnJvcnMgPSBGQUxTRSwgbWVzc2FnZSA9IEZBTFNFLCB0aWR5ID0gRkFMU0UsIGNhY2hlID0gRkFMU0UpCmxpYnJhcnkoUkNvbG9yQnJld2VyKQpsaWJyYXJ5KHdlc2FuZGVyc29uKQpsaWJyYXJ5KGdndGhlbWVzKQpsaWJyYXJ5KGJleW9uY2UpCmxpYnJhcnkodmlyaWRpcykKYGBgCgojIE92ZXJ2aWV3CgpUaGVyZSBhcmUgMTAgY2hhbGxlbmdlcyB0b3RhbC0gbm9uZSBhcmUgaW4gdGhlICJjb250aW51b3VzIGNvbG9ycyIgc2VjdGlvbiwgYnV0IHlvdSBjYW4gdXNlIHRoYXQgc2VjdGlvbiB0byBjb21wbGV0ZSB0aGUgdGVudGggY2hhbGxlbmdlIG9uIHlvdXIgb3duLiBVcGxvYWQgeW91ciBrbml0dGVkIGh0bWwgZG9jdW1lbnQgYnkgbmV4dCBXZWRuZXNkYXkgdG8gU2FrYWkhCgpOb3RlIHRoYXQgdGhpcyBsYWIgZGVwZW5kcyBvbiBfbWFueV8gcGFja2FnZXM7IG9uIHRoZSBSU3R1ZGlvIENsb3VkIHByb2plY3QgZm9yIHRoZSBsYWIgZGVsaXZlcmFibGUsIEkgaGF2ZSBwcmUtaW5zdGFsbGVkIHRoZW0gYWxsIChJIHRoaW5rKS4gV2UndmUgbGVmdCB0aGUgaW5zdGFsbGF0aW9uIGluc3RydWN0aW9ucyBoZXJlIGluIHRoZSBsYWIgZG9jdW1lbnQgZm9yIGRlbW9uc3RyYXRpb24gcHVycG9zZXMuCgojIFNsaWRlcyBmb3IgdG9kYXkKCmBgYHtyfQprbml0cjo6aW5jbHVkZV91cmwoInNsaWRlcy8wMy1zbGlkZXMuaHRtbCIpCmBgYAoKIyBQYWNrYWdlcwoKT3RoZXIgcGFja2FnZXMgd2lsbCBiZSBuZWVkZWQgdG8gYmUgaW5zdGFsbGVkIGFzIHlvdSBnby0gcmV2ZWFsIHRoZSBmaXJzdCBjb2RlIGNodW5rcyB3aGVuIGluIGRvdWJ0IQoKYGBge3J9CmxpYnJhcnkodGlkeXZlcnNlKQpgYGAKCiMgUmVhZCBpbiB0aGUgZGF0YQoKVXNlIHRoaXMgY29kZSBjaHVuayB0byByZWFkIGluIHRoZSBkYXRhIGF2YWlsYWJsZSBhdCBbaHR0cDovL2JpdC5seS9jczYzMS1tZW93XShodHRwOi8vYml0Lmx5L2NzNjMxLW1lb3cpOgoKYGBge3J9CnNvdW5kcyA8LSByZWFkX2NzdigiaHR0cDovL2JpdC5seS9jczYzMS1tZW93IikKYGBgCgpPciBzdG9yZSBpdCBsb2NhbGx5OgoKYGBge3J9CnNvdW5kcyA8LSByZWFkX2NzdihoZXJlOjpoZXJlKCJkYXRhIiwgImFuaW1hbF9zb3VuZHNfc3VtbWFyeS5jc3YiKSkKYGBgCgoKCiMgQ29sb3VyIHZzIGZpbGwgYWVzdGhldGljCgpGaWxsIGFuZCBjb2xvdXIgc2NhbGVzIGluIGdncGxvdDIgY2FuIHVzZSB0aGUgc2FtZSBwYWxldHRlcy4gU29tZSBzaGFwZXMgc3VjaCBhcyBsaW5lcyBvbmx5IGFjY2VwdCB0aGUgY29sb3VyIGFlc3RoZXRpYywgd2hpbGUgb3RoZXJzLCBzdWNoIGFzIHBvbHlnb25zLCBhY2NlcHQgYm90aCBjb2xvdXIgYW5kIGZpbGwgYWVzdGhldGljcy4gSW4gdGhlIGxhdHRlciBjYXNlLCB0aGUgY29sb3VyIHJlZmVycyB0byB0aGUgYm9yZGVyIG9mIHRoZSBzaGFwZSwgYW5kIHRoZSBmaWxsIHRvIHRoZSBpbnRlcmlvci4KCgoKYGBge3IgZWNobyA9IEZBTFNFfQojIyBBIGxvb2sgYXQgYWxsIDI1IHN5bWJvbHMKZGYgPC0gZGF0YS5mcmFtZSh4ID0gMTo1LCAKICAgICAgICAgICAgICAgICAgeSA9IHJlcChyZXYoc2VxKDAsIDI0LCBieSA9IDUpKSwgZWFjaCA9IDUpLCAKICAgICAgICAgICAgICAgICAgeiA9IDE6MjUpCnMgPC0gZ2dwbG90KGRmLCBhZXMoeCA9IHgsIHkgPSB5KSkgKyAKICBzY2FsZV9zaGFwZV9pZGVudGl0eSgpICsgCiAgZ2VvbV90ZXh0KGFlcyhsYWJlbCA9IHosIHkgPSB5IC0gMSkpICsgCiAgdGhlbWVfdm9pZCgpCnMgKyBnZW9tX3BvaW50KGFlcyhzaGFwZSA9IHopLCBzaXplID0gNCkgCmBgYAoKLS0tCgpBbGwgc3ltYm9scyBoYXZlIGEgZm9yZWdyb3VuZCBjb2xvdXIsIHNvIGlmIHdlIGFkZCBgY29sb3IgPSAibmF2eSJgLCB0aGV5IGFsbCBhcmUgYWZmZWN0ZWQuCgpgYGB7cn0KcyArIGdlb21fcG9pbnQoYWVzKHNoYXBlID0geiksIHNpemUgPSA0LCBjb2xvdXIgPSAibmF2eSIpIApgYGAKCi0tLQoKV2hpbGUgYWxsIHN5bWJvbHMgaGF2ZSBhIGZvcmVncm91bmQgY29sb3VyLCBzeW1ib2xzIDIxLTI1IGFsc28gdGFrZSBhIGJhY2tncm91bmQgY29sb3VyIChmaWxsKS4gU28gaWYgd2UgYWRkIGBmaWxsID0gIm9yY2hpZCJgLCBvbmx5IHRoZSBsYXN0IHJvdyBvZiBzeW1ib2xzIGFyZSBhZmZlY3RlZC4KCmBgYHtyfQpzICsgZ2VvbV9wb2ludChhZXMoc2hhcGUgPSB6KSwgc2l6ZSA9IDQsIGNvbG91ciA9ICJuYXZ5IiwgZmlsbCA9ICJvcmNoaWQiKSAKYGBgCgoKIyBEYXRhCgpGb3IgdGhlIHJlc3Qgb2YgdG9kYXksIHdlJ2xsIHBsYXkgd2l0aCB0aGUgYHNvdW5kc2AgZGF0YXNldC4gVGhpcyBkYXRhIHdhcyBkZXJpdmVkIGZyb20gdGhlIFIgcGFja2FnZSBbYHdvcmRiYW5rcmBdKGh0dHA6Ly9sYW5nY29nLmdpdGh1Yi5pby93b3JkYmFua3IvKSwgYW4gUiBpbnRlcmZhY2UgdG8gYWNjZXNzIFtXb3JkYmFua10oaHR0cDovL3dvcmRiYW5rLnN0YW5mb3JkLmVkdSktIGFuIG9wZW4gc291cmNlIGRhdGFiYXNlIG9mIGNoaWxkcmVuJ3Mgdm9jYWJ1bGFyeSBkZXZlbG9wbWVudC4gVGhlIHRvb2wgdXNlZCB0byBtZWFzdXJlIGNoaWxkcmVuJ3MgbGFuZ3VhZ2UgYW5kIGNvbW11bmljYXRpdmUgZGV2ZWxvcG1lbnQgaW4gdGhpcyBkYXRhYmFzZSBpcyB0aGUgW01hY0FydGh1ci1CYXRlcyBDb21tdW5pY2F0aXZlIERldmVsb3BtZW50IEludmVudG9yaWVzIChNQi1DREkpXShodHRwOi8vbWItY2RpLnN0YW5mb3JkLmVkdSkuIFRoZSBNRC1DREkgaXMgYSBwYXJlbnQtcmVwb3J0ZWQgcXVlc3Rpb25uYWlyZS4KCkhlcmUgaXMgYSBnbGltcHNlIG9mIHRoZSBkYXRhOgoKYGBge3J9CmdsaW1wc2Uoc291bmRzKQpgYGAKCgpOb3RlIHRoYXQgdGhlIHVuaXQgb2Ygb2JzZXJ2YXRpb24gaGVyZSBpcyBvbmUtcm93LXBlci1hZ2UtZ3JvdXAvYW5pbWFsIHNvdW5kLgoKClZhcmlhYmxlcyB5b3UgbmVlZCBmb3IgdGhpcyBsYWI6CgotIGBhZ2VgOiBjaGlsZCBhZ2UgaW4gbW9udGhzCi0gYHNvdW5kYDogYSBzdHJpbmcgZGVzY3JpYmluZyBhIHR5cGUgb2YgYW5pbWFsIHNvdW5kCi0gYGtpZHNfcHJvZHVjZWA6IHRoZSBudW1iZXIgb2YgcGFyZW50cyB3aG8gYW5zd2VyZWQgInllcywgbXkgY2hpbGQgcHJvZHVjZXMgdGhpcyBhbmltYWwgc291bmQiIChub3RlIHRoYXQgaWYgdGhlIGNoaWxkIHByb2R1Y2VzIGEgc291bmQgaXQgaXMgYXNzdW1lZCB0aGF0IHRoZXkgdW5kZXJzdGFuZCBpdCBhcyB3ZWxsKQotIGBraWRzX3Jlc3BvbmRgOiB0aGUgbnVtYmVyIG9mIHBhcmVudHMgd2hvIHJlc3BvbmRlZCB0byB0aGlzIHF1ZXN0aW9uIGF0IGFsbAotIGBwcm9wX3Byb2R1Y2VgOiB0aGUgcHJvcG9ydGlvbiBvZiBraWRzIHdob3NlIHBhcmVudHMgZW5kb3JzZWQgdGhhdCB0aGVpciBjaGlsZCBwcm9kdWNlcyB0aGlzIGFuaW1hbCBzb3VuZCwgb3V0IG9mIGFsbCBxdWVzdGlvbm5haXJlcyBhZG1pbmlzdGVyZWQgKGkuZS4sIGBraWRzX3Byb2R1Y2UgLyBraWRzX3Jlc3BvbmRgKQoKT3RoZXIgdmFyaWFibGVzIGluIHRoaXMgZGF0YXNldDoKCi0gYGtpZHNfdW5kZXJzdGFuZGA6IHRoZSBudW1iZXIgb2YgcGFyZW50cyB3aG8gYW5zd2VyZWQgInllcywgbXkgY2hpbGQgdW5kZXJzdGFuZHMgd2hhdCB0aGlzIGFuaW1hbCBzb3VuZCBtZWFucyIgKG5vdGUgdGhhdCBhIGNoaWxkIGNhbiB1bmRlcnN0YW5kIHRoZSBzb3VuZCBidXQgbm90IHByb2R1Y2UgaXQpCi0gYHByb3BfdW5kZXJzdGFuZGA6IHRoZSBwcm9wb3J0aW9uIG9mIGtpZHMgd2hvc2UgcGFyZW50cyBlbmRvcnNlZCB0aGF0IHRoZWlyIGNoaWxkIHVuZGVyc3RhbmRzIHRoaXMgYW5pbWFsIHNvdW5kLCBvdXQgb2YgYWxsIHF1ZXN0aW9ubmFpcmVzIGFkbWluaXN0ZXJlZCAoaS5lLiwgYGtpZHNfdW5kZXJzdGFuZCAvIGtpZHNfcmVzcG9uZGApCgoKCiMgRGlzY3JldGUgdnMgY29udGludW91cyB2YXJpYWJsZXMKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXByaW1hcnkiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPlJlZnJlc2hlciBDb250ZW50OjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgpGb3IgYSByZWZyZXNoZXIgKGFuZCBtb3JlIGRldGFpbGVkIGRlZXAtZGl2ZSksIGNoZWNrIG91dDogWyJXSEFUIElTIFRIRSBESUZGRVJFTkNFIEJFVFdFRU4gQ0FURUdPUklDQUwsIE9SRElOQUwgQU5EIE5VTUVSSUNBTCBWQVJJQUJMRVM/Il0oaHR0cHM6Ly9zdGF0cy5pZHJlLnVjbGEuZWR1L290aGVyL211bHQtcGtnL3doYXRzdGF0L3doYXQtaXMtdGhlLWRpZmZlcmVuY2UtYmV0d2Vlbi1jYXRlZ29yaWNhbC1vcmRpbmFsLWFuZC1udW1lcmljYWwtdmFyaWFibGVzLykKPC9kaXY+CjwvZGl2PgoKSW4gb3JkZXIgdG8gdXNlIGNvbG9yIHdpdGggeW91ciBkYXRhLCBtb3N0IGltcG9ydGFudGx5LCB5b3UgbmVlZCB0byBrbm93IGlmIHlvdeKAmXJlIGRlYWxpbmcgd2l0aCBkaXNjcmV0ZSBvciBjb250aW51b3VzIHZhcmlhYmxlcy4gCgojIyBEaXNjcmV0ZSBjb2xvciBwYWxldHRlcwoKRGlzY3JldGUgY29sb3IgcGFsZXR0ZXMgd29yayBiZXN0IHdoZW4geW91IHdhbnQgdG8gY29sb3IgYnkgYSBxdWFsaXRhdGl2ZSB2YXJpYWJsZS4gUXVhbGl0YXRpdmUgdmFyaWFibGVzIHRlbmQgdG8gYmUgZWl0aGVyIGNhdGVnb3JpY2FsIG9yIG9yZGluYWwuIERpZmZlcmVudCB2YXJpYWJsZXMgY2FuIGJlIHF1YWxpdGF0aXZlIG9yIHF1YW50aXRhdGl2ZSBkZXBlbmRpbmcgb24gY29udGV4dC4gCgpJbiB0aGlzIGRhdGFzZXQsIGBzb3VuZGAgaXMgYSBjYXRlZ29yaWNhbCB2YXJpYWJsZSB3aXRoIDMgcG9zc2libGUgdmFsdWVzOgpgYGB7cn0Kc291bmRzICU+JSAKICBkaXN0aW5jdChzb3VuZCkgJT4lIAogIGtuaXRyOjprYWJsZSgpCmBgYAoKV2UgY291bGQgbWFwIGFyYml0cmFyeSBudW1iZXJzIG9udG8gZWFjaCBvZiB0aGVzZSBzb3VuZHMsIGxpa2UgMSwgMiwgYW5kIDMtIGJ1dCB0aGUgbnVtYmVycyBzdGlsbCB3b3VsZCBub3QgbWVhbiBhbnl0aGluZy4gVGhhdCBpcywgdGhlcmUgaXMgbm8gaW50cmluc2ljIG9yZGVyaW5nIHRvIHRoZXNlIGNhdGVnb3JpZXMuIEV4YW1wbGVzIG9mIGNvbW1vbiBwdXJlIGNhdGVnb3JpY2FsIHZhcmlhYmxlcyBhcmUgcmFjZSBvciBldGhuaWNpdHksIGdlbmRlciwgaGFpciBjb2xvciwgZXllIGNvbG9yLCBldGMuIENvbG9yaW5nIGJ5IHNvdW5kIGlzIHVzZWQgYXMgYSB3YXkgdG8gKmRpc3Rpbmd1aXNoKiB0aGUgZGF0YSBmb3IgZGlmZmVyZW50IHNvdW5kcyBmcm9tIGVhY2ggb3RoZXIgKHJlYWQgbW9yZSBoZXJlOiBodHRwOi8vc2VyaWFsbWVudG9yLmNvbS9kYXRhdml6L2NvbG9yLWJhc2ljcy5odG1sI2NvbG9yLWFzLWEtdG9vbC10by1kaXN0aW5ndWlzaCkKCiMjIENvbnRpbnVvdXMgY29sb3IgcGFsZXR0ZXMKCkNvbnRpbnVvdXMgY29sb3IgcGFsZXR0ZXMgd29yayBiZXN0IHdoZW4geW91IHdhbnQgdG8gY29sb3IgYnkgYSBxdWFudGl0YXRpdmUgdmFyaWFibGUuIFF1YW50aXRhdGl2ZSB2YXJpYWJsZXMgdGVuZCB0byBiZSBlaXRoZXIgb3JkaW5hbCBvciBjb250aW51b3VzLiBJbiB0aGlzIGRhdGFzZXQsIGBhZ2VgIChpbiBtb250aHMpIGNhbiBvbmx5IHRha2Ugb24gYSBsaW1pdGVkIHNldCBvZiB2YWx1ZXM6CgpgYGB7cn0Kc291bmRzICU+JSAKICBkaXN0aW5jdChhZ2UpICU+JSAKICBwdWxsCmBgYAoKSG93ZXZlciwgaW4gdGhlIGZvbGxvd2luZyBwbG90cywgd2UnbGwgdHJlYXQgYWdlIGFzIGEgY29udGludW91cyB2YXJpYWJsZSBwbG90dGVkIGFjcm9zcyB0aGUgeC1heGlzLiBJbiBzb21lIGNvbnRleHRzLCB0aGlzIGtpbmQgb2YgdmFyaWFibGUgY291bGQgYmUgdHJlYXRlZCBhcyBhIG9yZGluYWwgdmFyaWFibGUuIEhvd2V2ZXIsIGZvciBjb2xvciBwdXJwb3NlcywgdGhpcyB3b3VsZCBub3QgaWRlYWwgaGVyZSBzaW5jZSB0aGVyZSBhcmUgMTEgImNhdGVnb3JpZXMiIChzZWUgaHR0cDovL3NlcmlhbG1lbnRvci5jb20vZGF0YXZpei9jb2xvci1waXRmYWxscy5odG1sKS4gQWdlIGhhcyBhIG5hdHVyYWwgYW5kIG1lYW5pbmdmdWwgb3JkZXI6IGEgY2hpbGQgd2hvIGlzIDkgbW9udGhzIG9sZCBpcyAxIG1vbnRoIG9sZGVyIHRoYW4gb25lIHdobyBpcyA4IG1vbnRocyBvbGQuIFNvLCB3ZSdsbCB1c2UgdGhhdCBuYXR1cmFsIG9yZGVyaW5nIHRvIG91ciBhZHZhbnRhZ2UgYW5kIG5vdCB1c2UgY29sb3IgdG8gcmVwcmVzZW50IGFnZSBhcyBhIHZhcmlhYmxlLiBXaGVuIHlvdSAqZG8qIGFwcGx5IGEgY29udGludW91cyBjb2xvciBwYWxldHRlLCB5b3UnbGwgd2FudCB0byB1c2UgY29sb3IgdG8geW91ciBhZHZhbnRhZ2UgdG8gW3JlcHJlc2VudCBkYXRhIHZhbHVlc10oaHR0cDovL3NlcmlhbG1lbnRvci5jb20vZGF0YXZpei9jb2xvci1iYXNpY3MuaHRtbCNjb2xvci10by1yZXByZXNlbnQtZGF0YS12YWx1ZXMpLgoKIyBLbm93IHlvdXIgZGF0YQoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICMxOjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgotIEhvdyBtYW55IHZhcmlhYmxlcz8KICAgIC0gV2hpY2ggdmFyaWFibGVzIGFyZSBjb250aW51b3VzPwogICAgLSBXaGljaCBvbmVzIGFyZSBjYXRlZ29yaWNhbCBvciBvcmRpbmFsPwotIEhvdyBtYW55IHRvdGFsIGtpZHMgZG8gd2UgaGF2ZSBkYXRhIGZvcj8KLSBIb3cgbWFueSBhZ2VzIChpbiBtb250aHMpPwogIC0gSG93IG1hbnkga2lkcyBwZXIgYWdlPwotIEhvdyBtYW55IHR5cGVzIG9mIGFuaW1hbCBzb3VuZHM/IFdoYXQgYXJlIHRoZXk/CiAgPC9kaXY+CjwvZGl2PgoKTGV0J3Mgc3RhcnQganVzdCBieSBnZXR0aW5nIGEgZmVlbCBmb3IgaG93IG1hbnkga2lkcyBwcm9kdWNlIGVhY2gga2luZCBvZiBzb3VuZCwgYWNyb3NzIHRoZSBmdWxsIGFnZSByYW5nZS4gV2UgY291bGQgbWFrZSBhIHRhYmxlOgoKYGBge3J9CnNvdW5kcyAlPiUgCiAgZ3JvdXBfYnkoc291bmQpICU+JSAKICBzdW1tYXJpemUodG90YWxfcHJvZHVjZSA9IHN1bShraWRzX3Byb2R1Y2UpKSAlPiUgCiAga25pdHI6OmthYmxlKCkKYGBgCgpPciB3ZSBjb3VsZCBtYWtlIGEgc2ltcGxlIGJhciBwbG90OgoKYGBge3J9CmdncGxvdChzb3VuZHMsIGFlcyh4ID0gc291bmQsIHkgPSBraWRzX3Byb2R1Y2UpKSArIAogIGdlb21fY29sKCkgKwogIGxhYnMoeCA9ICJTb3VuZCIsIHkgPSAiVG90YWwgQ2hpbGRyZW4gUHJvZHVjaW5nIikKYGBgCgpGb3IgdGhpcyBraW5kIG9mIHBsb3QsIHdlIGRvbid0IHJlYWxseSBuZWVkIGNvbG9yLiBXaGF0IGlmIHdlIHdhbnQgdG8gc2VlIGhvdyB0aGUgbnVtYmVyIG9mIGtpZHMgd2hvIHByb2R1Y2UgZWFjaCBzb3VuZCB2YXJpZXMgYnkgYWdlPyBXZSdsbCBjaGFuZ2UgdGhlIHgtYXhpcyB0byBhZ2UgYW5kIGluc3RlYWQgYGZhY2V0X3dyYXBgIGJ5IGBzb3VuZGAsIGFuZCBtYWtlIHRoZSB5LWF4aXMgYSBwcm9wb3J0aW9uIGluc3RlYWQgb2YgY291bnRzLgoKYGBge3J9CmdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCB5ID0gcHJvcF9wcm9kdWNlKSkgKyAKICBnZW9tX2NvbCgpICsKICBsYWJzKHggPSAiQWdlIChtb3MpIiwgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIpICsKICBmYWNldF93cmFwKH5zb3VuZCkKYGBgCgpUaGUgYmFyIGdlb20gbWFrZXMgdGhpcyBhIGxpdHRsZSBoYXJkIHRvIHJlYWQgYW5kIGNvbXBhcmUgYWNyb3NzIGZhY2V0cyB0aG91Z2guIExldCdzIHRyeSBwb2ludHMgaW5zdGVhZC4KCmBgYHtyfQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgeSA9IHByb3BfcHJvZHVjZSkpICsgCiAgZ2VvbV9wb2ludCgpICsKICBsYWJzKHggPSAiQWdlIChtb3MpIiwgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIpICsKICBmYWNldF93cmFwKH5zb3VuZCkKYGBgCgpUaGF0IGlzIGEgbGl0dGxlIGJldHRlciEgRmFjZXRzIGFsbG93IHVzIHRvIHBhcnNlIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0d28gcXVhbnRpdGF0aXZlIHZhcmlhYmxlcyAoaGVyZSwgYWdlIGFuZCBwcm9wb3J0aW9uIG9mIGtpZHMgcHJvZHVjaW5nKSBieSBhIHF1YWxpdGF0aXZlIHZhcmlhYmxlIChoZXJlLCB0eXBlIG9mIHNvdW5kKS4gQW5vdGhlciB3YXkgd2UgY291bGQgZG8gdGhpcywgaW5zdGVhZCBvZiBmYWNldHRpbmcsIGlzIHRvIHVzZSBjb2xvci4gVGhpcyB3b3VsZCBtYWtlIGl0IGVhc2llciB0byBjb21wYXJlIHByb3BvcnRpb25zIGF0IGVhY2ggYWdlLgoKCgoKIyBEaXNjcmV0ZSBjb2xvcnMKCkxldCdzIHN0YXJ0IHdpdGggYSBiYXNlIHBsb3Qgd2l0aCBhZ2UgKGluIG1vbnRocykgYWxvbmcgdGhlIHgtYXhpcyBhbmQgdGhlIHByb3BvcnRpb24gb2YgY2hpbGRyZW4gcHJvZHVjaW5nIGVhY2ggd29yZCBhbG9uZyB0aGUgeS1heGlzLCB1c2luZyBwb2ludHMgYXMgdGhlIGdlb21ldHJpYyBvYmplY3QuIFNldCB0aGUgc2l6ZSBvZiB0aGUgcG9pbnRzIHRvIDIgYW5kIGNoYW5nZSB0aGUgeC0gYW5kIHktYXhpcyBsYWJlbHMgdG8gIkFnZSAobW9udGhzKSIgYW5kICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIsIHJlc3BlY3RpdmVseS4gCgpgYGB7cn0KZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIHkgPSBwcm9wX3Byb2R1Y2UpKSArIAogIGdlb21fcG9pbnQoc2l6ZSA9IDIpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIpCmBgYAoKCgojIyBEZWZhdWx0IGRpc2NyZXRlIHBhbGV0dGUKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjMjo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KVGFrZSB0aGUgcGxvdCB3ZSBqdXN0IG1hZGUsIGFuZCBlZGl0IHRoZSBjb2RlIHRvIG1hcCB0aGUgY29sb3Igb2YgdGhlIHBvaW50cyB0byB0aGUgdHlwZSBvZiBzb3VuZCBwcm9kdWNlZCAqYXQgdGhlIGdlb20gbGV2ZWwqLiBUaGUgY29sb3JzIHRoYXQgc2hvdyB1cCBhcmUgdGhlIGRlZmF1bHQgZGlzY3JldGUgcGFsZXR0ZSBpbiBgZ2dwbG90MmAuCgpgYGB7cn0KZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIHkgPSBwcm9wX3Byb2R1Y2UpKSArIAogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gc291bmQpLCBzaXplID0gMikgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCB5ID0gIlByb3BvcnRpb24gb2YgQ2hpbGRyZW4gUHJvZHVjaW5nIikKYGBgCiAgPC9kaXY+CjwvZGl2PgoKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjMzo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KVHJ5IGFkZGluZyBgZ2VvbV9saW5lKClgIHRvIHRoaXMgcGxvdCB0byBjb25uZWN0IHRoZSBkb3RzLiBEb2VzIHRoaXMgbG9vayByaWdodD8gVXNlIGA/Z2VvbV9saW5lYCB0byBmaWd1cmUgb3V0IGhvdyB0aGlzIGdlb20gY29ubmVjdHMgdGhlIGRvdHMgYnkgZGVmYXVsdCwgYW5kIHdoaWNoIGFlc3RoZXRpYyBjYW4gYmUgdXNlZCB0byBjb25uZWN0IGNhc2VzIHRvZ2V0aGVyLiBUcnkgZWRpdGluZyB5b3VyIGNvZGUgdG8gZHJhdyAzIGJsYWNrIGxpbmVzLSBvbmUgZm9yIGVhY2ggc291bmQuCgoKYGBge3J9CiMgRG9lcyB0aGlzIGxvb2sgcmlnaHQ/IG5vIQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgeSA9IHByb3BfcHJvZHVjZSkpICsgCiAgZ2VvbV9saW5lKCkgKwogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gc291bmQpLCBzaXplID0gMikgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCB5ID0gIlByb3BvcnRpb24gb2YgQ2hpbGRyZW4gUHJvZHVjaW5nIikgCmBgYAoKCmBgYHtyfQojIEEgcG9zc2libGUgc29sdXRpb24KZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIHkgPSBwcm9wX3Byb2R1Y2UpKSArIAogIGdlb21fbGluZShhZXMoZ3JvdXAgPSBzb3VuZCkpICsKICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IHNvdW5kKSwgc2l6ZSA9IDIpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIpIApgYGAKCiAgPC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICM0OjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgpNYWtlIHR3byBwbG90czoKCjEuIFJlY3JlYXRlIHRoZSBwbG90IGFib3ZlLCBidXQgdGhpcyB0aW1lIG1hcCBjb2xvciB0byB0aGUgdHlwZSBvZiBzb3VuZCBwcm9kdWNlZCBmb3IgYm90aCB0aGUgcG9pbnQgYW5kIGxpbmUgZ2VvbXMuIFBheSBhdHRlbnRpb24gdG8gdGhlIG9yZGVyIG9mIHRoZSBsYXllcnMgeW91IGFyZSBhZGRpbmctIHlvdSBtYXkgd2lzaCB0byBwbGFjZSBgZ2VvbV9saW5lYCAqYmVmb3JlKiBgZ2VvbV9wb2ludGAgc28gdGhlIGxpbmVzIGFyZSBhbHdheXMgInBhaW50ZWQiIHVuZGVybmVhdGggdGhlIHBvaW50cy4KCjIuIEluc3RlYWQgb2YgYGdlb21fbGluZWAsIGFkZCBhIGxvZXNzIGxpbmUgdXNpbmcgYGdlb21fc21vb3RoYC4gVXNlIGA/Z2VvbV9zbW9vdGhgIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGdldCByaWQgb2YgdGhlIGdyZXkgc3RhbmRhcmQgZXJyb3IgcmliYm9uLiBZb3UgbWF5IGFsc28gd2FudCB0byBpbmNyZWFzZSB0aGUgbGluZSB3aWR0aC4gCgpgYGB7cn0KIyBEb2VzIHRoaXMgbG9vayByaWdodD8geWVzIQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgeSA9IHByb3BfcHJvZHVjZSwgY29sb3IgPSBzb3VuZCkpICsgCiAgZ2VvbV9saW5lKCkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IDIpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIpIAoKZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIAogICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHByb3BfcHJvZHVjZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IHNvdW5kKSkgKyAKICBnZW9tX3Ntb290aChzZSA9IEZBTFNFLCBsd2QgPSAuNSkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IDIpICArCiAgbGFicyh4ID0gIkFnZSAobW9udGhzKSIsIHkgPSAiUHJvcG9ydGlvbiBvZiBDaGlsZHJlbiBQcm9kdWNpbmciKSAKYGBgCgogIDwvZGl2Pgo8L2Rpdj4KCldoeSBkb2VzIHRoaXMgd29yaz8gVG8gdGVsbCBgZ2VvbV9saW5lYCBob3cgdG8gY29ubmVjdCB5b3VyIGRvdHMsIHlvdSBjYW4gZWl0aGVyOgoKLSBNYXAgdGhlIGBncm91cGAgYWVzdGhldGljIChzbyBgYWVzKGdyb3VwID0gc291bmQpYCksIG9yIAotIE1hcCB0aGUgYGNvbG9yYCBhZXN0aGV0aWMgZ2xvYmFsbHkgKGBhZXMoY29sb3IgPSBzb3VuZClgLiAKCkJlY2F1c2UgYGdlb21fbGluZWAgdW5kZXJzdGFuZHMgdGhlIGBjb2xvcmAgYWVzdGhldGljLCBpdCB3aWxsIHRyeSB0byBkcmF3IHNlcGFyYXRlIGxpbmVzIGZvciBlYWNoIGNvbG9yLiBIZXJlIHRoYXQgdHJhbnNsYXRlcyB0byB0aHJlZSBsaW5lcywgb25lIGZvciBlYWNoIHNvdW5kLCB3aGljaCBpcyB3aGF0IHdlIHdhbnQhCgojIyBCcmllZiBhc2lkZTogZmFjdG9ycwoKQXQgdGhpcyBwb2ludCwgb3VyIHBsb3QgaXMgbG9va2luZyBwcmV0dHkgZ29vZC4gQnV0IHlvdSBtYXkgaGF2ZSBub3RpY2VkIHRoYXQgdGhlIGxlZ2VuZCBvcmRlciBkb2Vzbid0IG1hdGNoIHRoZSBsaW5lcy4gV2UgY2FuIGZpeCB0aGF0IHVzaW5nIHRoZSBbYGZvcmNhdHNgIHBhY2thZ2VdKGh0dHA6Ly9mb3JjYXRzLnRpZHl2ZXJzZS5vcmcpLCB3aGljaCBpcyBgZm9yYCBgY2F0YGVnb3JpY2FsIHZhcmlhYmxlcy4gVGhlcmUgYXJlIGxvdHMgb2YgZnVuY3Rpb25zIGluIGBmb3JjYXRzYCwgYW5kIHlvdSBjYW4gaW5zdGFsbCAmIGxvYWQgaXQgc2VwYXJhdGVseSwgYWx0aG91Z2ggYGZvcmNhdHNgIGlzIGxvYWRlZCB3aXRoIHRoZSBgdGlkeXZlcnNlYC4KCmBgYHtyIGV2YWwgPSBGQUxTRX0KaW5zdGFsbC5wYWNrYWdlcygiZm9yY2F0cyIpCmxpYnJhcnkoZm9yY2F0cykKYGBgCgpXZSdsbCB1c2UgdGhlIGBmY3RfcmVvcmRlcjJgIGZ1bmN0aW9uLCB3aGljaCB3b3JrcyBmb3Igd2hlbiB5b3UgaGF2ZSBhIGxpbmUgY2hhcnQgb2YgdHdvIHF1YW50aXRhdGl2ZSB2YXJpYWJsZXMsIGNvbG9yZWQgYnkgYSBmYWN0b3IgdmFyaWFibGUuIExldCdzIHNlZSB0aGUgZGlmZmVyZW5jZS4KCgpgYGB7cn0Kc291bmRzIDwtIHNvdW5kcyAlPiUgCiAgbXV0YXRlKHNvdW5kID0gYXMuZmFjdG9yKHNvdW5kKSkKCnNvdW5kX3RyYWogPC0gZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIAogICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHByb3BfcHJvZHVjZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGZjdF9yZW9yZGVyMihzb3VuZCwgYWdlLCBwcm9wX3Byb2R1Y2UpKSkgKwogIGdlb21fc21vb3RoKHNlID0gRkFMU0UsIGx3ZCA9IC41KSArCiAgZ2VvbV9wb2ludChzaXplID0gMikgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCAKICAgICAgIHkgPSAiUHJvcG9ydGlvbiBvZiBDaGlsZHJlbiBQcm9kdWNpbmciLCAKICAgICAgIGNvbG9yID0gInNvdW5kIikKc291bmRfdHJhagpgYGAKCk1VQ0ggQkVUVEVSISBTYXZlIHlvdXIgcGxvdCBvYmplY3QgYXMgYHNvdW5kX3RyYWpgLiBOb3cgd2UgY2FuIHN0YXJ0IHBsYXlpbmcgd2l0aCB0aGUgYWN0dWFsIGNvbG9ycy4KCiMjIFNldCBsdW1pbmFuY2UgYW5kIHNhdHVyYXRpb24gKGNocm9tYXRpY2l0eSkKClRoZSBkZWZhdWx0IHF1YWxpdGF0aXZlIHBhbGV0dGUgd29ya3MgZmluZSBoZXJlLiBUaGUgYWRkaXRpb24gb2YgW2BzY2FsZV9jb2xvcl9odWVgXShodHRwOi8vZ2dwbG90Mi50aWR5dmVyc2Uub3JnL3JlZmVyZW5jZS9zY2FsZV9odWUuaHRtbCkgY2hhbmdlcyBub3RoaW5nLgoKYGBge3J9CnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX2h1ZSgpCmBgYAoKV2UgY2FuIGFsc28gY2hhbmdlIHRoZXNlIHNldHRpbmdzIHdpdGhpbiB0aGUgZGVmYXVsdCBjb2xvciBwYWxldHRlLCB3aGVyZSB0aGUgYXJndW1lbnRzIGFyZToKCi0gYGhgID0gcmFuZ2Ugb2YgaHVlcyB0byB1c2UsIGluIFswLCAzNjBdCi0gYGxgID0gbHVtaW5hbmNlIChsaWdodG5lc3MpCi0gYGNgID0gY2hyb21hIChpbnRlbnNpdHkgb2YgY29sb3IpCgpgYGB7cn0KIyBDaGFuZ2UgaHVlIChsIGFuZCBjIGFyZSBkZWZhdWx0cykKc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfaHVlKGggPSBjKDAsIDkwKSwgbCA9IDY1LCBjID0gMTAwKQoKIyBVc2UgbHVtaW5hbmNlPTQ1LCBpbnN0ZWFkIG9mIGRlZmF1bHQgNjUKc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfaHVlKGwgPSA0NSkKCiMgUmVkdWNlIHNhdHVyYXRpb24gKGNocm9tYSkgZnJvbSAxMDAgdG8gNTAsIGFuZCBpbmNyZWFzZSBsdW1pbmFuY2UKc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfaHVlKGwgPSA3NSwgYyA9IDUwKQpgYGAKCiMjIFNldCBkaXNjcmV0ZSBjb2xvcnMKCldlIGNhbiBjaGFuZ2UgdGhlIGFjdHVhbCBjb2xvcnMgdXNlZCBieSBhZGRpbmcgdGhlIGxheWVyIGBzY2FsZV9jb2xvcl9tYW51YWxgIG9yIGBzY2FsZV9maWxsX21hbnVhbGAuIENvbmZ1c2lvbiBiZXR3ZWVuIHdoaWNoIHRvIHVzZSB3aGVuIGlzIG9mdGVuIHRoZSBjYXVzZSBvZiBtdWNoIGZydXN0cmF0aW9uIQoKVG8gbmFtZSBtb3JlIHRoYW4gb25lIGNvbG9yLCB3aGljaCB5b3Ugb2Z0ZW4gd2FudCB0byBkbywgdXNlIGBjKClgLiBJbiB0aGUgcGFyZW50aGVzZXMsIG5hbWVkIGNvbG9ycyBhbmQgaGV4IGNvbG9ycyBhcmUgYWx3YXlzIGluIHF1b3Rlcy4KCmBgYHtyfQpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiY29ybmZsb3dlcmJsdWUiLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2VhZ3JlZW4iLCAiY29yYWwiKSkKYGBgCgpUaGVyZSBhcmUgbWFueSBbbmFtZWQgY29sb3JzXShodHRwOi8vd3d3LnN0YXQuY29sdW1iaWEuZWR1L350emhlbmcvZmlsZXMvUmNvbG9yLnBkZikgYXZhaWxhYmxlIGluIFIhCgo8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1zdWNjZXNzIj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkaW5nIj5DaGFsbGVuZ2UgIzU6PC9kaXY+CiAgPGRpdiBjbGFzcz0icGFuZWwtYm9keSI+ClZpZXcgdGhlIGNvZGUgYmxvY2tzIGJlbG93LiBDb3B5IGFuZCBwYXN0ZSB0aGUgY29kZSB0byBydW4gdGhlbSBpbiB5b3VyIG93biBmaWxlLiBXaHkgZG8gbmVpdGhlciBvZiB0aGUgZm9sbG93aW5nIGNvZGUgYmxvY2tzIGNoYW5nZSB0aGUgY29sb3JzIG9mIHRoZSBwb2ludHMgYW5kIGxpbmVzPyBVc2UgeW91ciB3b3JkcyA6KSAqKHRoZSBhbnN3ZXIgaXMgYmVsb3cgdGhlIGNoYWxsZW5nZSwgYnV0IHRyeSB0byB0cm91YmxlLXNob290IG9uIHlvdXIgb3duIGZpcnN0KSoKCmBgYHtyfQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gcHJvcF9wcm9kdWNlLCAKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gZmN0X3Jlb3JkZXIyKHNvdW5kLCBhZ2UsIHByb3BfcHJvZHVjZSkpKSArIAogIGdlb21fc21vb3RoKHNlID0gRkFMU0UsIGx3ZCA9IC41KSArCiAgZ2VvbV9wb2ludChzaXplID0gMikgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCAKICAgICAgIHkgPSAiUHJvcG9ydGlvbiBvZiBDaGlsZHJlbiBQcm9kdWNpbmciLCAKICAgICAgIGNvbG9yID0gInNvdW5kIikgKwogIHNjYWxlX2ZpbGxfbWFudWFsKHZhbHVlcyA9IGMoImNvcm5mbG93ZXJibHVlIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2VhZ3JlZW4iLCAiY29yYWwiKSkKYGBgCgoKCmBgYHtyfQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gcHJvcF9wcm9kdWNlLCAKICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGwgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSkpICsgCiAgZ2VvbV9zbW9vdGgoc2UgPSBGQUxTRSwgbHdkID0gLjUpICsKICBnZW9tX3BvaW50KHNpemUgPSAyKSArCiAgbGFicyh4ID0gIkFnZSAobW9udGhzKSIsIAogICAgICAgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIsIAogICAgICAgZmlsbCA9ICJzb3VuZCIpICsKICBzY2FsZV9maWxsX21hbnVhbCh2YWx1ZXMgPSBjKCJjb3JuZmxvd2VyYmx1ZSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlYWdyZWVuIiwgImNvcmFsIikpCmBgYAogIDwvZGl2Pgo8L2Rpdj4KCkFuc3dlcnM6IAoKLSBJbiB0aGUgZmlyc3QsIHdlIHVzZWQgYHNjYWxlX2ZpbGxfbWFudWFsYCwgYnV0IHRoZSBpbiB0aGUgZ2xvYmFsIGFlc3RoZXRpY3MsIHdlIG1hcHBlZCB0aGUgYGNvbG9yYCwgbm90IGBmaWxsYCwgYWVzdGhldGljIG9udG8gdGhlIGBzb3VuZGAgdmFyaWFibGUuCi0gSW4gdGhlIHNlY29uZCwgd2UgZGlkIGRlZmluZSB0aGUgYGZpbGxgIGFlc3RoZXRpYyBhbmQgdXNlZCBgc2NhbGVfZmlsbF9tYW51YWxgLCBzbyB0aGF0IGlzIGdvb2QuIEJ1dCBgZ2VvbV9saW5lYCBvbmx5IHVuZGVyc3RhbmRzIHRoZSBgY29sb3JgIGFlc3RoZXRpYywgbm90IGBmaWxsYC4gQW5kIGZvciBgZ2VvbV9wb2ludGAsIHRoZSBkZWZhdWx0IHNoYXBlIGZvciBpcyAxOSwgd2hpY2ggZG9lcyBub3QgdW5kZXJzdGFuZCB0aGUgYGZpbGxgIGFlc3RoZXRpYy4KCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjNjo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KU3RhcnQgd2l0aCB0aGlzIHBsb3Q6CgpgYGB7cn0Kc291bmRfdHJhagpgYGAKCkFkZCBhIGJsYWNrIG91dGxpbmUgdG8gdGhlIHBvaW50cywgYW5kIGNvbG9yIHRoZSBpbnNpZGUgb2YgdGhlIHBvaW50cyBhbmQgdGhlIGxpbmVzIGJ5IGBzb3VuZGAgdXNpbmcgdGhlIGRlZmF1bHQgZGlzY3JldGUgY29sb3IgcGFsZXR0ZS4gWW91IG1heSBhbHNvIHdpc2ggdG8gZWRpdCB0aGUgbGVnZW5kcyBvbiB0aGlzIHBsb3Q6IGBnZW9tX3Ntb290aGAgaGFzIGFuIGFyZ3VtZW50IGNhbGxlZCBgc2hvdy5sZWdlbmQgPSBGQUxTRWAuIFNlZSBpZiB5b3UgcHJlZmVyIHRoZSBwbG90IHdpdGggdGhpcyBjaGFuZ2UuIAoKSWYgdGhpcyB3YXMgZWFzeSwgdHJ5IGFwcGx5aW5nIHRoZSBzYW1lIGN1c3RvbSBjb2xvciBwYWxldHRlIHRvIHRoZSBpbnNpZGUgb2YgdGhlIHBvaW50cyBhbmQgdG8gdGhlIGxpbmVzLiAKCmBgYHtyfQpnZ3Bsb3Qoc291bmRzLCBhZXMoeCA9IGFnZSwgCiAgICAgICAgICAgICAgICAgICB5ID0gcHJvcF9wcm9kdWNlLCAKICAgICAgICAgICAgICAgICAgIGZpbGwgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSkpICsgCiAgZ2VvbV9zbW9vdGgoYWVzKGNvbG9yID0gZmN0X3Jlb3JkZXIyKHNvdW5kLCBhZ2UsIHByb3BfcHJvZHVjZSkpLAogICAgICAgICAgICAgIHNlID0gRkFMU0UsIGx3ZCA9IC41LCBzaG93LmxlZ2VuZCA9IEZBTFNFKSArCiAgZ2VvbV9wb2ludChzaXplID0gMiwgc2hhcGUgPSAyMSkgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCAKICAgICAgIHkgPSAiUHJvcG9ydGlvbiBvZiBDaGlsZHJlbiBQcm9kdWNpbmciLCAKICAgICAgIGZpbGwgPSAic291bmQiKQpgYGAKCgoKYGBge3J9CmdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCAKICAgICAgICAgICAgICAgICAgIHkgPSBwcm9wX3Byb2R1Y2UsIAogICAgICAgICAgICAgICAgICAgZmlsbCA9IGZjdF9yZW9yZGVyMihzb3VuZCwgYWdlLCBwcm9wX3Byb2R1Y2UpKSkgKyAKICBnZW9tX3Ntb290aChhZXMoY29sb3IgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSksCiAgICAgICAgICAgICAgc2UgPSBGQUxTRSwgbHdkID0gLjUsIHNob3cubGVnZW5kID0gRkFMU0UpICsKICBnZW9tX3BvaW50KHNpemUgPSAyLCBzaGFwZSA9IDIxKSArCiAgbGFicyh4ID0gIkFnZSAobW9udGhzKSIsIAogICAgICAgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIsIAogICAgICAgZmlsbCA9ICJzb3VuZCIpICsKICBzY2FsZV9maWxsX21hbnVhbCh2YWx1ZXMgPSBjKCJjb3JuZmxvd2VyYmx1ZSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlYWdyZWVuIiwgImNvcmFsIikpICsKICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiY29ybmZsb3dlcmJsdWUiLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzZWFncmVlbiIsICJjb3JhbCIpKQpgYGAKCgogIDwvZGl2Pgo8L2Rpdj4KCllvdSBjYW4gYWxzbyBkZWZpbmUgeW91ciBjb2xvciBwYWxldHRlIGFzIGEgdmVjdG9yIG91dHNpZGUgb2YgYGdncGxvdDJgLiBCZWxvdywgSSBtYWRlIGFuIG9iamVjdCBjYWxsZWQgYG15X2NvbG9yc2Agb3V0c2lkZSBvZiBgZ2dwbG90MmAuIFRvIHVzZSBpdCwgd2UgY2FsbCB0aGF0IG9iamVjdCB3aXRoaW4gdGhlIGBzY2FsZV9jb2xvdXJfbWFudWFsYCBmdW5jdGlvbi4KCmBgYHtyfQpteV9jb2xvcnMgPC0gYygiY2FkZXRibHVlIiwgInN0ZWVsYmx1ZSIsICJzYWxtb24iKSAjIHF1b3RlIGNvbG9yIG5hbWVzCnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXMgPSBteV9jb2xvcnMpICMgbm90ZTogbm90IGluIHF1b3RlcwpgYGAKCgo8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1zdWNjZXNzIj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkaW5nIj5DaGFsbGVuZ2UgIzc6PC9kaXY+CiAgPGRpdiBjbGFzcz0icGFuZWwtYm9keSI+CkRlZmluZSBhIGN1c3RvbSBjb2xvciBwYWxldHRlIHVzaW5nIGhleGFkZWNpbWFsIGNvbG9ycyAoI3JyZ2diYiksIGFuZCBhcHBseSBpdCB1c2luZyBgc2NhbGVfY29sb3JfbWFudWFsYCB0byB5b3VyIGBzb3VuZF90cmFqYCBwbG90LiBTb21lIGJhc2ljIG9uZXMgYXJlIGhlcmU6IAoKaHR0cHM6Ly9zYXNoYXQubWUvMjAxNy8wMS8xMS9saXN0LW9mLTIwLXNpbXBsZS1kaXN0aW5jdC1jb2xvcnMvCgpQYXJzZSB0aGUgaGV4YWRlY2ltYWwgc3RyaW5nIGxpa2Ugc286ICNycmdnYmIsIHdoZXJlIHJyLCBnZywgYW5kIGJiIHJlZmVyIHRvIGNvbG9yIGludGVuc2l0eSBpbiB0aGUgcmVkLCBncmVlbiwgYW5kIGJsdWUgY2hhbm5lbHMsIHJlc3BlY3RpdmVseS4gCgoKYGBge3J9CiMgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vbXdhc2tvbS9zZWFib3JuL2Jsb2IvbWFzdGVyL3NlYWJvcm4vcGFsZXR0ZXMucHkKc2JfY29sb3JibGluZCA8LSBjKCIjMDA3MkIyIiwgIiMwMDlFNzMiLCAiI0Q1NUUwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICIjQ0M3OUE3IiwgIiNGMEU0NDIiLCAiIzU2QjRFOSIpCnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG91cl9tYW51YWwodmFsdWVzID0gc2JfY29sb3JibGluZCkKYGBgCgogIDwvZGl2Pgo8L2Rpdj4KCiMjIEJ1aWx0LWluIGRpc2NyZXRlIHBhbGV0dGVzCgojIyMgQ29sb3JicmV3ZXIKClRvIHVzZSBDb2xvcmJyZXdlciBwYWxldHRlcywgeW91J2xsIG5lZWQgdG8gaW5zdGFsbCB0aGUgYFJDb2xvckJyZXdlcmAgcGFja2FnZSBmcm9tIENSQU4uIFRoaXMgY2h1bmsgb2YgY29kZSB0ZWxscyB5b3UgaG93OgoKYGBge3IgZXZhbCA9IEZBTFNFfQppbnN0YWxsLnBhY2thZ2VzKCJSQ29sb3JCcmV3ZXIiKQpsaWJyYXJ5KFJDb2xvckJyZXdlcikKYGBgCgpDb2xvcmJyZXdlciBoYXMgYSBmZXcgcXVhbGl0YXRpdmUgcGFsZXR0ZXMgbmFtZWQ6IEFjY2VudCwgRGFyazIsIFBhaXJlZCwgUGFzdGVsMSwgUGFzdGVsMiwgU2V0MSwgU2V0MiwgU2V0My4gSGVyZSBpcyBob3cgdG8gdmlldyB0aGVtOgoKYGBge3J9CmJyZXdlci5wYWwoNSwgIkRhcmsyIikgIyBsaXN0IDUgaGV4IGNvbG9ycwpkaXNwbGF5LmJyZXdlci5wYWwoNSwgIkRhcmsyIikgIyB2aWV3IDUgaGV4IGNvbG9ycwpgYGAKCkFuZCBoZXJlIGlzIGhvdyB5b3UgdXNlIHRoZW06CgpgYGB7cn0Kc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfYnJld2VyKHBhbGV0dGUgPSAiRGFyazIiKQpgYGAKCgojIyMgV2VzIEFuZGVyc29uIHBhbGV0dGVzIAoKTXkgZmF2b3JpdGUhIFRvIHVzZSBXZXMgQW5kZXJzb24gcGFsZXR0ZXMsIHlvdSdsbCBuZWVkIHRvIGluc3RhbGwgdGhlIGB3ZXNhbmRlcnNvbmAgcGFja2FnZSBmcm9tIENSQU4uIFRoaXMgY2h1bmsgb2YgY29kZSB0ZWxscyB5b3UgaG93OgoKYGBge3IgZXZhbCA9IEZBTFNFfQppbnN0YWxsLnBhY2thZ2VzKCJ3ZXNhbmRlcnNvbiIpCmxpYnJhcnkod2VzYW5kZXJzb24pCmBgYAoKCgpgYGB7cn0KbmFtZXMod2VzX3BhbGV0dGVzKSAjIGFsbCB0aGUgcGFsZXR0ZSBuYW1lcwp3ZXNfcGFsZXR0ZSgiR3JhbmRCdWRhcGVzdDIiKSAjIHZpZXcgbmFtZWQgcGFsZXR0ZQp3ZXNfcGFsZXR0ZSgiR3JhbmRCdWRhcGVzdDIiKVsxOjRdICMgbGlzdCBmaXJzdCA0IGhleCBjb2xvcnMKd2VzX3BhbGV0dGUoIkdyYW5kQnVkYXBlc3QyIilbYygxLDQpXSAjIGxpc3QgY29sb3JzIDEgYW5kIDQKYGBgCgpUbyB1c2UgdGhlc2UgcGFsZXR0ZXMsIHVzZSBgc2NhbGVfY29sb3JfbWFudWFsYCB3aGVyZSBgdmFsdWVzYCBpcyBzZXQgdG8gYHdlc19wYWxldHRlKCJuYW1lIilgLiBGb3IgZXhhbXBsZToKCmBgYHtyfQpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gd2VzX3BhbGV0dGUoIkRhcmplZWxpbmcxIikpCgpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gd2VzX3BhbGV0dGUoIkZhbnRhc3RpY0ZveDEiKSkKYGBgCgoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICM4OjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgpXaGF0IGlmIHlvdSBqdXN0IGRvbid0IHdhbnQgdG8gdXNlIHRoZSBjb2xvcnMgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIGluPyBVc2UgYSBgd2VzX3BhbGV0dGVgIG9mIHlvdXIgY2hvaWNlLiBVc2luZyBvdXIgY29kZSBmcm9tIGFib3ZlLCB0cnkgcGlja2luZyB0aGUgbGFzdCAzIGNvbG9ycyBvZiBhIHBhbGV0dGUuIEFkZCBpdCB0byB5b3VyIGBzb3VuZF90cmFqYCBwbG90LgoKSWYgdGhpcyB3YXMgZWFzeSwgdHJ5IHVzaW5nIGNvbG9ycyAyLCAzLCBhbmQgNSBpbnN0ZWFkLgoKYGBge3J9CnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXMgPSB3ZXNfcGFsZXR0ZSgiRGFyamVlbGluZzEiKVszOjVdKQoKc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IHdlc19wYWxldHRlKCJGYW50YXN0aWNGb3gxIilbYygyLCAzLCA1KV0pCmBgYAogIDwvZGl2Pgo8L2Rpdj4KCgojIyMgYGdndGhlbWVzYCBwYWxldHRlcwoKVG8gdXNlIHRoZXNlIHBhbGV0dGVzLCB5b3UnbGwgbmVlZCB0byBpbnN0YWxsIHRoZSBgZ2d0aGVtZXNgIHBhY2thZ2UgZnJvbSBDUkFOLiBUaGlzIGNodW5rIG9mIGNvZGUgdGVsbHMgeW91IGhvdzoKCmBgYHtyIGV2YWwgPSBGQUxTRX0KaW5zdGFsbC5wYWNrYWdlcygiZ2d0aGVtZXMiKQpsaWJyYXJ5KGdndGhlbWVzKQpgYGAKCgoKYGBge3J9CnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX2ZpdmV0aGlydHllaWdodCgpCgpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl9lY29ub21pc3QoKQpgYGAKCgojIyMgUGFsZXR0ZXMgZnJvbSB0aGUgUXVlZW4gQmVlCgpUbyB1c2UgW0JleW9uY2UgcGFsZXR0ZXNdKGh0dHBzOi8vZ2l0aHViLmNvbS9kaWxsL2JleW9uY2UpLCB5b3UnbGwgbmVlZCB0byBpbnN0YWxsIHRoZSBgYmV5b25jZWAgcGFja2FnZSBmcm9tIEdpdEh1YiB1c2luZyBgZGV2dG9vbHM6Omluc3RhbGxfZ2l0aHViKClgLiBUaGlzIGNodW5rIG9mIGNvZGUgdGVsbHMgeW91IGhvdzoKCmBgYHtyIGV2YWwgPSBGQUxTRX0KaW5zdGFsbC5wYWNrYWdlcygiZGV2dG9vbHMiKQpkZXZ0b29sczo6aW5zdGFsbF9naXRodWIoImRpbGwvYmV5b25jZSIpCmxpYnJhcnkoYmV5b25jZSkKYGBgCgpOb3RlIHRoYXQgYSBudW1iZXIgb2Ygc3R1ZGVudHMgaGFkIGluc3RhbGxhdGlvbiBwcm9ibGVtcyB3aXRoIHRoaXMgcGFja2FnZSEgTW92ZSBvbiBpZiB5b3UgZG8uCgpgYGB7cn0KYmV5b25jZV9wYWxldHRlKDE4KQpgYGAKCmBgYHtyfQpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYmV5b25jZV9wYWxldHRlKDE4KVszOjVdKQpgYGAKCkhlcmUgd2UnbGwgb25seSB1c2UgdGhlIGZpcnN0LCBmb3VydGgsIGFuZCBmaWZ0aCBjb2xvcnMgaW4gdGhlIHBhbGV0dGUuCgpgYGB7cn0Kc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGJleW9uY2VfcGFsZXR0ZSgxOClbYygxLCA0LCA1KV0pCmBgYAoKIyMjIFZpcmlkaXMgcGFsZXR0ZXMKCj4gIlVzZSB0aGUgY29sb3Igc2NhbGVzIGluIHRoaXMgcGFja2FnZSB0byBtYWtlIHBsb3RzIHRoYXQgYXJlIHByZXR0eSwgYmV0dGVyIHJlcHJlc2VudCB5b3VyIGRhdGEsIGVhc2llciB0byByZWFkIGJ5IHRob3NlIHdpdGggY29sb3JibGluZG5lc3MsIGFuZCBwcmludCB3ZWxsIGluIGdyZXkgc2NhbGUuIgoKVG8gdXNlLCB5b3UnbGwgbmVlZCB0byBpbnN0YWxsIHRoZSBgdmlyaWRpc2AgcGFja2FnZSBmcm9tIENSQU4uIFRoaXMgY2h1bmsgb2YgY29kZSB0ZWxscyB5b3UgaG93OgoKYGBge3IgZXZhbCA9IEZBTFNFfQppbnN0YWxsLnBhY2thZ2VzKCJ2aXJpZGlzIikKbGlicmFyeSh2aXJpZGlzKQpgYGAKClJlYWQgbW9yZSBoZXJlIGluIHRoZSBbdmlyaWRpcyB2aWduZXR0ZV0oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvd2ViL3BhY2thZ2VzL3ZpcmlkaXMvdmlnbmV0dGVzL2ludHJvLXRvLXZpcmlkaXMuaHRtbCkuIFRoZSBkZWZhdWx0IGFyZ3VtZW50IGZvciBgZGlzY3JldGVgIGlzIEZBTFNFLCBzbyB0byB1c2UgdGhlIGRpc2NyZXRlIHBhbGV0dGVzIHlvdSBuZWVkIHRvIHNldCBgZGlzY3JldGUgPSBUUlVFYC4gVGhlcmUgYXJlIGZvdXIgY29sb3JtYXAgb3B0aW9ucyBhdmFpbGFibGU6CgotICJtYWdtYSIgKG9yICJBIiksCi0gImluZmVybm8iIChvciAiQiIpLAotICJwbGFzbWEiIChvciAiQyIpLAotICJ2aXJpZGlzIiAob3IgIkQiLCB0aGUgZGVmYXVsdCBvcHRpb24pLgoKYGBge3J9CnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX3ZpcmlkaXMoZGlzY3JldGUgPSBUUlVFKSArCiAgdGhlbWVfbWluaW1hbCgpCgpzb3VuZF90cmFqICsKICBzY2FsZV9jb2xvcl92aXJpZGlzKGRpc2NyZXRlID0gVFJVRSwgb3B0aW9uID0gInBsYXNtYSIpICsKICB0aGVtZV9taW5pbWFsKCkKYGBgCgo8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1zdWNjZXNzIj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkaW5nIj5DaGFsbGVuZ2UgIzk6PC9kaXY+CiAgPGRpdiBjbGFzcz0icGFuZWwtYm9keSI+ClVzZSB0aGUgYHZpcmlkaXNgIHBhY2thZ2UgdG8gY29sb3IgdGhlIHBvaW50cyBieSBhbmQgdGhlIGxpbmVzIGJ5IGBzb3VuZGA7IG1ha2UgdGhlIG91dGxpbmUgb2YgdGhlIHBvaW50cyAibWlkbmlnaHRibHVlIi4gUGljayBhbnkgY29sb3JtYXAgb3B0aW9uLCBhbmQgcGxheSB3aXRoIGB0aGVtZV9id2Agb3IgYHRoZW1lX21pbmltYWxgIHRvIHNlZSB3aGF0IHlvdSBsaWtlLgoKYGBge3J9CmdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCAKICAgICAgICAgICAgICAgICAgIHkgPSBwcm9wX3Byb2R1Y2UsIAogICAgICAgICAgICAgICAgICAgZmlsbCA9IGZjdF9yZW9yZGVyMihzb3VuZCwgYWdlLCBwcm9wX3Byb2R1Y2UpKSkgKyAKICBnZW9tX3Ntb290aChhZXMoY29sb3IgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSksCiAgICAgICAgICAgICAgc2UgPSBGQUxTRSwgbHdkID0gLjUsIHNob3cubGVnZW5kID0gRkFMU0UpICsKICBnZW9tX3BvaW50KHNpemUgPSAyLCBzaGFwZSA9IDIxLCBjb2xvdXIgPSAibWlkbmlnaHRibHVlIikgKwogIGxhYnMoeCA9ICJBZ2UgKG1vbnRocykiLCAKICAgICAgIHkgPSAiUHJvcG9ydGlvbiBvZiBDaGlsZHJlbiBQcm9kdWNpbmciLCAKICAgICAgIGZpbGwgPSAic291bmQiKSArCiAgc2NhbGVfZmlsbF92aXJpZGlzKGRpc2NyZXRlID0gVFJVRSkgKwogIHNjYWxlX2NvbG9yX3ZpcmlkaXMoZGlzY3JldGUgPSBUUlVFKSArCiAgdGhlbWVfbWluaW1hbCgpCmBgYAogIDwvZGl2Pgo8L2Rpdj4KCgoKCiMjIEdyZXlzY2FsZSBmb3IgZGlzY3JldGUKClVzZSBgc2NhbGVfY29sb3JfZ3JleWAgb3IgYHNjYWxlX2ZpbGxfZ3JleWAsIG9yIHNvbWV0aW1lcyBib3RoIGRlcGVuZGluZyBvbiB5b3VyIGdlb21zIGFuZCB0aGUgYWVzdGhldGljcyB0aGV5IHVuZGVyc3RhbmQuCgpgYGB7cn0Kc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfZ3JleSgpICsKICB0aGVtZV9taW5pbWFsKCkKYGBgCgpTZXQgc3RhcnQgYW5kIGVuZAoKYGBge3J9CnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX2dyZXkoc3RhcnQgPSAwLjIsIGVuZCA9IC44KSAKYGBgCgoKTWFrZSB0aGUgc2FtZSBwbG90IGJ1dCBtYWtlIHBvaW50cyBvdXRsaW5lZCBpbiBibGFjawoKYGBge3J9CmdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCAKICAgICAgICAgICAgICAgICAgIHkgPSBwcm9wX3Byb2R1Y2UsIAogICAgICAgICAgICAgICAgICAgZmlsbCA9IGZjdF9yZW9yZGVyMihzb3VuZCwgYWdlLCBwcm9wX3Byb2R1Y2UpKSkgKyAKICBnZW9tX3Ntb290aChhZXMoY29sb3IgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSksCiAgICAgICAgICAgICAgc2UgPSBGQUxTRSwgbHdkID0gLjUsIHNob3cubGVnZW5kID0gRkFMU0UpICsKICBnZW9tX3BvaW50KHNpemUgPSAyLCBzaGFwZSA9IDIxKSArCiAgbGFicyh4ID0gIkFnZSAobW9udGhzKSIsIAogICAgICAgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIsIAogICAgICAgZmlsbCA9ICJzb3VuZCIpICsKICBzY2FsZV9maWxsX2dyZXkoc3RhcnQgPSAwLjMsIGVuZCA9IDEpICsKICBzY2FsZV9jb2xvcl9ncmV5KHN0YXJ0ID0gMC4zLCBlbmQgPSAxKSAKYGBgCgpTdWdnZXN0IHJlZHVuZGFuY3kgaW4gZ3JleXNjYWxlLSB0cnkgY2hhbmdpbmcgbGluZSB0eXBlIGluc3RlYWQgb2YgbGluZSAob3IgaW4gYWRkaXRpb24gdG8pIGxpbmUgY29sb3IuCgoKQ2hhbmdlIGxpbmUgdHlwZSBieSBgc291bmRgLCBzZXQgY29sb3IgdG8gYmxhY2suCgpgYGB7cn0KZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIAogICAgICAgICAgICAgICAgICAgeSA9IHByb3BfcHJvZHVjZSwgCiAgICAgICAgICAgICAgICAgICBmaWxsID0gZmN0X3Jlb3JkZXIyKHNvdW5kLCBhZ2UsIHByb3BfcHJvZHVjZSkpKSArIAogIGdlb21fc21vb3RoKGFlcyhsdHkgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSksIGNvbG9yID0gImJsYWNrIiwKICAgICAgICAgICAgICBzZSA9IEZBTFNFLCBsd2QgPSAuNSwgc2hvdy5sZWdlbmQgPSBGQUxTRSkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IDIsIHNoYXBlID0gMjEpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgCiAgICAgICB5ID0gIlByb3BvcnRpb24gb2YgQ2hpbGRyZW4gUHJvZHVjaW5nIiwgCiAgICAgICBmaWxsID0gInNvdW5kIikgKwogIHNjYWxlX2ZpbGxfZ3JleShzdGFydCA9IDAuMywgZW5kID0gMSkgCmBgYAoKQ2hhbmdlIGJvdGghCgpgYGB7cn0KZ2dwbG90KHNvdW5kcywgYWVzKHggPSBhZ2UsIAogICAgICAgICAgICAgICAgICAgeSA9IHByb3BfcHJvZHVjZSwgCiAgICAgICAgICAgICAgICAgICBmaWxsID0gZmN0X3Jlb3JkZXIyKHNvdW5kLCBhZ2UsIHByb3BfcHJvZHVjZSkpKSArIAogIGdlb21fc21vb3RoKGFlcyhjb2xvciA9IGZjdF9yZW9yZGVyMihzb3VuZCwgYWdlLCBwcm9wX3Byb2R1Y2UpLAogICAgICAgICAgICAgICAgICBsdHkgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSksCiAgICAgICAgICAgICAgc2UgPSBGQUxTRSwgbHdkID0gLjUsIHNob3cubGVnZW5kID0gRkFMU0UpICsKICBnZW9tX3BvaW50KHNpemUgPSAyLCBzaGFwZSA9IDIxKSArCiAgbGFicyh4ID0gIkFnZSAobW9udGhzKSIsIAogICAgICAgeSA9ICJQcm9wb3J0aW9uIG9mIENoaWxkcmVuIFByb2R1Y2luZyIsIAogICAgICAgZmlsbCA9ICJzb3VuZCIpICsKICBzY2FsZV9maWxsX2dyZXkoc3RhcnQgPSAwLjMsIGVuZCA9IC44KSArCiAgc2NhbGVfY29sb3JfZ3JleShzdGFydCA9IDAuMywgZW5kID0gLjgpIApgYGAKCiMjIENvbG9yYmxpbmQtZnJpZW5kbHkgcGFsZXR0ZXMKClRoZSBbYGNvbG9yYmxpbmRyYCBwYWNrYWdlXShodHRwczovL2dpdGh1Yi5jb20vY2xhdXN3aWxrZS9jb2xvcmJsaW5kcikgY2FuIGJlIHVzZWQgdG8gInNpbXVsYXRlIGNvbG9yYmxpbmRuZXNzIGluIHByb2R1Y3Rpb24tcmVhZHkgUiBmaWd1cmVzLiIgVG8gdXNlIHRoaXMgcGFja2FnZSwgeW91J2xsIG5lZWQgdG8gZmlyc3QgaW5zdGFsbCB0aGUgYGNvd3Bsb3RgIHBhY2thZ2UgZnJvbSBHaXRIdWIgdXNpbmcgYGRldnRvb2xzOjppbnN0YWxsX2dpdGh1YigpYC4gWW91J2xsIGFsc28gbmVlZCB0byBpbnN0YWxsIHRoZSBgY29sb3JzcGFjZWAgcGFja2FnZSBmcm9tIENSQU4uIEZpbmFsbHksIHlvdSBjYW4gdGhlbiB1c2UgYGRldnRvb2xzOjppbnN0YWxsX2dpdGh1YigpYCBhZ2FpbiB0byBpbnN0YWxsIHRoZSBgY29sb3JibGluZHJgIHBhY2thZ2UuIFRoaXMgY29kZSBjaHVuayBzaG93cyB5b3UgaG93IHRvIGRvIGFsbCAzIGluc3RhbGxzIHRvIHVzZSB0aGUgYGNvbG9yYmxpbmRyYCBwYWNrYWdlOgoKYGBge3IgZXZhbCA9IEZBTFNFfQpkZXZ0b29sczo6aW5zdGFsbF9naXRodWIoIndpbGtlbGFiL2Nvd3Bsb3QiKQppbnN0YWxsLnBhY2thZ2VzKCJjb2xvcnNwYWNlIiwgcmVwb3MgPSAiaHR0cDovL1ItRm9yZ2UuUi1wcm9qZWN0Lm9yZyIpCmRldnRvb2xzOjppbnN0YWxsX2dpdGh1YigiY2xhdXN3aWxrZS9jb2xvcmJsaW5kciIpCmBgYAoKVG8gdXNlOgpgYGB7cn0KIyBzYXZlIGEgZ2dwbG90IG9iamVjdApteV9zb3VuZF90cmFqIDwtIHNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXMgPSBiZXlvbmNlX3BhbGV0dGUoMTgpW2MoMSwgNCwgNSldKQpgYGAKClZpZXcgdGhhdCBmaWd1cmUgYWZ0ZXIgY29sb3ItdmlzaW9uLWRlZmljaWVuY3kgc2ltdWxhdGlvbjoKCmBgYHtyfQpsaWJyYXJ5KGNvbG9yYmxpbmRyKQpjdmRfZ3JpZChteV9zb3VuZF90cmFqKQpgYGAKCllvdSBjYW4gYWxzbyB1c2UgdGhlIGNvbG9yYmxpbmQtZnJpZW5kbHkgcGFsZXR0ZSBpbiB0aGlzIHBhY2thZ2UgdXNpbmcgYHNjYWxlX2NvbG9yX09rYWJlSXRvYCBhbmQgYHNjYWxlX2ZpbGxfT2thYmVJdG9gOgoKYGBge3J9CmNiX3NvdW5kX3RyYWogPC0gc291bmRfdHJhaiArCiAgc2NhbGVfY29sb3JfT2thYmVJdG8oKQoKY2Jfc291bmRfdHJhagpjdmRfZ3JpZChjYl9zb3VuZF90cmFqKQpgYGAKCllvdSBjYW4gc3RpbGwgdXNlIHRoaXMgY29sb3JibGluZC1mcmllbmRseSBwYWxldHRlIHdpdGhvdXQgdGhlIGBjb2xvcmJsaW5kcmAgcGFja2FnZSB0aG91Z2guIFtIZXJlXShodHRwOi8vamZseS5pYW0udS10b2t5by5hYy5qcC9jb2xvci8pIGFyZSB0aGUgY29sb3JzIQoKIVtdKGh0dHA6Ly9qZmx5LmlhbS51LXRva3lvLmFjLmpwL2NvbG9yL2ltYWdlL3BhbGxldGUuanBnKQoKVGhlIFtDb29rYm9vayBmb3IgUl0oaHR0cDovL3d3dy5jb29rYm9vay1yLmNvbS9HcmFwaHMvQ29sb3JzXyhnZ3Bsb3QyKS8jYS1jb2xvcmJsaW5kLWZyaWVuZGx5LXBhbGV0dGUpIHByb3ZpZGVkIHRoZSBtYXRjaGluZyBoZXggY29sb3JzIHRvbyB0byBtYWtlIGxpZmUgZWFzaWVyOgpgYGB7cn0KY2JiUGFsZXR0ZSA8LSBjKCIjMDAwMDAwIiwgIiNFNjlGMDAiLCAiIzU2QjRFOSIsICIjMDA5RTczIiwgIiNGMEU0NDIiLCAiIzAwNzJCMiIsICIjRDU1RTAwIiwgIiNDQzc5QTciKQoKIyBUbyB1c2UgZm9yIGxpbmUgYW5kIHBvaW50IGNvbG9ycywgYWRkCnNvdW5kX3RyYWogKwogIHNjYWxlX2NvbG91cl9tYW51YWwodmFsdWVzID0gY2JiUGFsZXR0ZVtjKDMsIDcsIDgpXSkKYGBgCgojIyBSZXBlbCBsYWJlbHMKCmBgYHtyfQpsaWJyYXJ5KGdncmVwZWwpCgpzb3VuZHMgPC0gc291bmRzICU+JQogIG11dGF0ZShsYWJlbCA9IGNhc2Vfd2hlbigKICAgIGFnZSA9PSBtYXgoYWdlKSB+IHNvdW5kKSkKCmdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCAKICAgICAgICAgICAgICAgICAgIHkgPSBwcm9wX3Byb2R1Y2UsIAogICAgICAgICAgICAgICAgICAgY29sb3IgPSBmY3RfcmVvcmRlcjIoc291bmQsIGFnZSwgcHJvcF9wcm9kdWNlKSkpICsKICBnZW9tX3Ntb290aChzZSA9IEZBTFNFLCBsd2QgPSAuNSkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IDIpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgCiAgICAgICB5ID0gIlByb3BvcnRpb24gb2YgQ2hpbGRyZW4gUHJvZHVjaW5nIikgKwogIGdlb21fdGV4dF9yZXBlbChhZXMobGFiZWwgPSBsYWJlbCksCiAgICAgICAgICAgICAgICAgIG51ZGdlX3ggPSAxLAogICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAieSIsCiAgICAgICAgICAgICAgICAgIG5hLnJtID0gVFJVRSkgKwogIGd1aWRlcyhjb2xvciA9IEZBTFNFKQpgYGAKCgoKIyBDb250aW51b3VzIGNvbG9ycwoKKk4uQi4gQWxsIG9mIHRoZSBleGFtcGxlIHBsb3RzIGJlbG93IGFyZSBncmVhdCBleGFtcGxlcyBvZiBob3cgKipub3QqKiB0byB1c2UgY29udGludW91cyBjb2xvcnMuIEknbSBzaG93aW5nIHRoZXNlIHNvIHlvdSBjYW4gc2VlIGhvdyB0byB3b3JrIHdpdGggY29udGludW91cyBjb2xvciBwYWxldHRlcywgYW5kIHRvIG1ha2UgdGhpcyB0b3BpYyBmbG93IGVhc2llciBmb3IgeW91IEknbSBzdGlja2luZyB3aXRoIG9yaWdpbmFsIGRhdGFzZXQuKgoKIyMgRGVmYXVsdCBjb250aW51b3VzIHBhbGV0dGUKCkxldOKAmXMgbWFwIGNvbG9yIHRvIGEgY29udGludW91cyB2YXJpYWJsZS4gRm9yIHRoaXMsIHdlIGFyZSByZXR1cm5pbmcgdG8gYGdlb21fbGluZWAgaW5zdGVhZCBvZiBgZ2VvbV9zbW9vdGhgLCBiZWNhdXNlIHRoZSBsYXR0ZXIgZG9lc24ndCByZXNwb25kIHRvIGNvbnRpbnVvdXMgY29sb3IgcGFsZXR0ZXMuCgpgYGB7cn0Kc291bmRfYnlfYWdlIDwtIGdncGxvdChzb3VuZHMsIGFlcyh4ID0gYWdlLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gcHJvcF9wcm9kdWNlLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGFnZSkpICsKICBnZW9tX2xpbmUoYWVzKGdyb3VwID0gc291bmQpLCBsd2QgPSAuNSkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IDIpICsKICBsYWJzKHggPSAiQWdlIChtb250aHMpIiwgCiAgICAgICB5ID0gIlByb3BvcnRpb24gb2YgQ2hpbGRyZW4gUHJvZHVjaW5nIikKc291bmRfYnlfYWdlCmBgYAoKCgojIyBDb2xvciBjaG9pY2Ugd2l0aCBjb250aW51b3VzIHZhcmlhYmxlcyAKCldpdGggZGlzY3JldGUgY29sb3JzLCB3ZSB1c2VkIGVpdGhlciBgc2NhbGVfY29sb3JfbWFudWFsYCBvciBgc2NhbGVfZmlsbF9tYW51YWxgIChhbmQgc29tZXRpbWVzIGJvdGggd2VyZSBuZWVkZWQhKS4gRm9yIGNvbnRpbnVvdXMgY29sb3JzLCB3ZSB1c2UgZWl0aGVyIGBzY2FsZV9jb2xvcl9ncmFkaWVudGAgb3IgYHNjYWxlX2ZpbGxfZ3JhZGllbnRgLgoKYGBge3J9CnNvdW5kX2J5X2FnZSArCiAgc2NhbGVfY29sb3JfZ3JhZGllbnQoKQpgYGAKCllvdSBjYW4gcmV2ZXJzZSB0aGUgZ3JhZGllbnQgc2NhbGUuLi4KCmBgYHtyfQpzb3VuZF9ieV9hZ2UgKwogIHNjYWxlX2NvbG9yX2dyYWRpZW50KHRyYW5zID0gInJldmVyc2UiKQpgYGAKCgpgYGB7cn0Kc291bmRfYnlfYWdlICsKICBzY2FsZV9jb2xvcl9ncmFkaWVudChsb3cgPSAid2hpdGUiLCBoaWdoID0gInJlZCIpCmBgYAoKV2UgY2FuIG1ha2UgdGhpcyBzYW1lIHBsb3QgdXNpbmcgYSBjdXN0b20gZ3JleXNjYWxlIGdyYWRpZW50LgoKYGBge3J9CnNvdW5kX2J5X2FnZSArCiAgc2NhbGVfY29sb3JfZ3JhZGllbnQobG93ID0gImdyZXk5MCIsIGhpZ2ggPSAiYmxhY2siKQpgYGAKCgoKU28gYHNjYWxlX2NvbG9yX2dyYWRpZW50YCBnaXZlcyB5b3UgYSBzZXF1ZW50aWFsIGdyYWRpZW50LCBidXQgeW91IG1heSB3YW50IGEgZGl2ZXJnaW5nIGNvbG9yIHNjaGVtZSBpbnN0ZWFkLiBGb3IgdGhhdCwgeW91IGNhbiB1c2UgYHNjYWxlX2NvbG9yX2dyYWRpZW50MmAKCgpgYGB7cn0KIyBEaXZlcmdpbmcgY29sb3Igc2NoZW1lCm1lZF9hZ2UgPC0gc291bmRzICU+JSAKICBzdW1tYXJpemUobW9zID0gbWVkaWFuKGFnZSkpICU+JSAKICBwdWxsKCkKc291bmRfYnlfYWdlICsKICBzY2FsZV9jb2xvcl9ncmFkaWVudDIobWlkcG9pbnQgPSBtZWRfYWdlLAogICAgICAgICAgICAgICAgICAgICAgbG93PSJibHVlIiwgbWlkPSJ3aGl0ZSIsIGhpZ2g9InJlZCIgKQpgYGAKCiMjIEJ1aWx0LWluIGNvbnRpbnVvdXMgcGFsZXR0ZXMKCiMjIyBVc2UgYFJDb2xvckJyZXdlcmAgCgpBZ2FpbiwgdG8gdXNlIHlvdSBuZWVkIHRvIGluc3RhbGwgYW5kIGxvYWQgdGhlIGBSQ29sb3JCcmV3ZXJgIHBhbGV0dGUuIAoKYGBge3IgZXZhbCA9IEZBTFNFfQpsaWJyYXJ5KFJDb2xvckJyZXdlcikKYGBgCgpUaGVuIHVzZSBgc2NhbGVfY29sb3JfZ3JhZGllbnRuYC4KCmBgYHtyfQpzb3VuZF9ieV9hZ2UgKwogIHNjYWxlX2NvbG9yX2dyYWRpZW50bihjb2xvdXJzID0gYnJld2VyLnBhbChuPTUsIG5hbWU9IlB1QnVHbiIpKQpgYGAKClJldmVyc2UgdGhlIGNvbG9ycy4uLgoKYGBge3J9CnNvdW5kX2J5X2FnZSArCiAgc2NhbGVfY29sb3JfZ3JhZGllbnRuKGNvbG91cnMgPSByZXYoYnJld2VyLnBhbChuPTUsIG5hbWU9IlB1QnVHbiIpKSkKYGBgCgojIyMgVmlyaWRpcwoKUmVhZCBtb3JlIGhlcmUgaW4gdGhlIFt2aXJpZGlzIHZpZ25ldHRlXShodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvdmlyaWRpcy92aWduZXR0ZXMvaW50cm8tdG8tdmlyaWRpcy5odG1sKQoKYGBge3IgZXZhbCA9IEZBTFNFfQpsaWJyYXJ5KHZpcmlkaXMpCmBgYAoKVGhlIGRlZmF1bHQgaXMgdGhlIGB2aXJpZGlzYCBwYWxldHRlIHdpdGhpbiB0aGUgYHZpcmlkaXNgIHBhY2thZ2UhCgpOb3RlISBGb3IgZGlzY3JldGUgPT0gRkFMU0UgKHRoZSBkZWZhdWx0KSBhbGwgb3RoZXIgYXJndW1lbnRzIGFyZSBhcyB0byBgc2NhbGVfZmlsbF9ncmFkaWVudG5gIG9yIGBzY2FsZV9jb2xvcl9ncmFkaWVudG5gLiAoQWxzbyBub3RlIHRoYXQgYF9ncmFkaWVudF9uX2AgaXMgbm90IGEgdHlwby0gdGhlIF9uXyB2ZXJzaW9ucyBvZiB0aG9zZSBmdW5jdGlvbnMgYWxsb3cgbXVsdGktY29sb3IgZ3JhZGllbnRzKS4KCmBgYHtyfQpzb3VuZF9ieV9hZ2UgKwogIHNjYWxlX2NvbG9yX3ZpcmlkaXMoKQpgYGAKCmBgYHtyfQpzb3VuZF9ieV9hZ2UgKwogIHNjYWxlX2NvbG9yX3ZpcmlkaXMob3B0aW9uID0gIm1hZ21hIikKYGBgCgpSZWFkIHRoZSBoZWxwIGZ1bmN0aW9uIGZvciBgP3NjYWxlX2NvbG9yX3ZpcmlkaXNgLiBXZSdsbCB1c2UgdGhlICJpbmZlcm5vIiBwYWxldHRlIF9pbiByZXZlcnNlXy4KCmBgYHtyfQpzb3VuZF9ieV9hZ2UgKwogIHNjYWxlX2NvbG9yX3ZpcmlkaXMob3B0aW9uID0gImluZmVybm8iLCBiZWdpbiA9IDEsIGVuZCA9IDApCmBgYAoKCgojIEZpbmFsIGNoYWxsZW5nZSAoIzEwKQoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICMxMDo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KVXNpbmcgbmV3IGRhdGEsIG1ha2UgdGhyZWUgbmV3IHBsb3RzLiBVc2UgYW55IGBnZW9tYCB0aGF0IG1ha2VzIHNlbnNlLiBUaGUgcGxvdHMgc2hvdWxkOgoKLSBIYXZlIHgtIGFuZCB5LWF4ZXMgdGhhdCBhcmUgZWFjaCBxdWFudGl0YXRpdmUgdmFyaWFibGVzLgotIEFwcGx5IGEgbm9uLWRlZmF1bHQgY29sb3IgcGFsZXR0ZSwgZWl0aGVyIGNvbG9yaW5nIGJ5IGEgcXVhbGl0YXRpdmUgdmFyaWFibGUgKGRpc2NyZXRlIGNvbG9ycykgb3IgYSBxdWFudGl0YXRpdmUgdmFyaWFibGUgKGNvbnRpbnVvdXMgY29sb3JzKS4gVGhpcyBsaXN0IG9mIFtSIGNvbG9yIHBhbGV0dGVzXShodHRwczovL2dpdGh1Yi5jb20vRW1pbEh2aXRmZWxkdC9yLWNvbG9yLXBhbGV0dGVzKSBoYXMgZXZlbiBtb3JlIGlkZWFzIHRoYW4gd2UgY291bGQgY292ZXIgaW4gY2xhc3MuCgoKMS4gSW4gdGhlIGZpcnN0IHBsb3QsIHlvdSBtdXN0ICoqd2llbGQgY29sb3IgY2FyZWZ1bGx5IGFuZCBlZmZlY3RpdmVseSoqLiBUaGUgYWRkaXRpb24gb2YgdGhlIGNvbG9yL2ZpbGwgYWVzdGhldGljcyBtdXN0IGJlIGRvbmUgaW4gYSB3YXkgdGhhdCB0aGUgaW50ZXJwcmV0YXRpb24gb2YgdGhlIHBsb3QgaW1wcm92ZXMuIEFsc28sIHlvdSBtdXN0IHNob3cgaG93IHlvdXIgY29sb3JzIGZhcmUgZm9yIGNvbG9yYmxpbmQgdmlld2Vycy4gSW5jbHVkZSAyLTMgc2VudGVuY2VzIGFib3V0IHdoeSB5b3UgbWFkZSB0aGUgcGxvdCB0aGF0IHlvdSBkaWQuIFdoYXQgcXVlc3Rpb25zIGRvZXMgeW91ciBwbG90IGFuc3dlcnMgKG9yIHBlcmhhcHMgd2hhdCBxdWVzdGlvbnMgZG9lcyB5b3VyIHBsb3QgcmFpc2UpPwoKMi4gSW4gdGhlIHNlY29uZCBwbG90LCB5b3UgbXVzdCAqKm1ha2UgYSBncmV5c2NhbGUgdmVyc2lvbiBvZiB5b3VyIGZpcnN0IHBsb3QhKiogQW5kIGFnYWluLCBpdCBtdXN0IGxvb2sgZ29vZCBhbmQgbWFrZSBzZW5zZS4KCjMuIEluIHRoZSB0aGlyZCBwbG90LCB5b3UgbXVzdCAqKnVzZSBjb2xvciBiYWRseSoqLiBNYWtlIGEgcGxvdCB3aGVyZSB0aGUgY29sb3JzIGFyZSBlaXRoZXIgcmVkdW5kYW50LCBjb25mdXNpbmcsIG9yIGp1c3QgZ2VuZXJhbGx5IG5vbi1zZW5zaWNhbC4gRXhwbGFpbiB3aHkgdGhpcyBsYXN0IHZpc3VhbGl6YXRpb24gZmFpbHMuCgogICAgCiAgICA8L2Rpdj4KPC9kaXY+CgpTb21lIGRhdGEgaWRlYXM6CgotIE1hY0FydGh1ci1CYXRlcyBDb21tdW5pY2F0aXZlIERldmVsb3BtZW50IEludmVudG9yeSAoTUItQ0RJKSwgYSBmYW1pbHkgb2YgcGFyZW50LXJlcG9ydCBxdWVzdGlvbm5haXJlcyBtZWFzdXJpbmcgY2hpbGRyZW4ncyB2b2NhYnVsYXJ5IHVuZGVyc3RhbmRpbmcgYW5kIHByb2R1Y3Rpb24KICAgIC0gW1IgcGFja2FnZSBgd29yZGJhbmtyYF0oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvd2ViL3BhY2thZ2VzL3dvcmRiYW5rci9pbmRleC5odG1sKQogICAgLSBTZWUgbXkgY29kZSBbaGVyZV0oMDNhLW1lb3ctY2xlYW5pbmcuaHRtbCkKLSBQT1RVUyBFeGVjdXRpdmUgT3JkZXJzCiAgICAtIFtEYXRhXShodHRwczovL3d3dy5mZWRlcmFscmVnaXN0ZXIuZ292L2V4ZWN1dGl2ZS1vcmRlcnMpCiAgICAtIEZvbGxvdyBCb2IgUnVkaXMnIGNvZGUtdGhyb3VnaCBbaGVyZV0oaHR0cHM6Ly9ydWQuaXMvYi8yMDE4LzA0LzE4L2V4YW1pbmluZy1wb3R1cy1leGVjdXRpdmUtb3JkZXJzLykKLSBOYXRpb25hbCBFbGVjdHJvbmljIEluanVyeSBTdXJ2ZWlsbGFuY2UgU3lzdGVtIChORUlTUykKICAgIC0gW1IgcGFja2FnZSBgbmVpc3NgXShodHRwczovL2dpdGh1Yi5jb20vaGFkbGV5L25laXNzKQogICAgLSBGb2xsb3cgSnVsaWEgU2lsZ2UncyBjb2RlLXRocm91Z2ggW2hlcmVdKGh0dHBzOi8vanVsaWFzaWxnZS5jb20vYmxvZy95b3VyLWZsb29yLykKLSBGbGlnaHRzCiAgICAtIFtSIHBhY2thZ2UgYHBud2ZsaWdodHMxNGBdKGh0dHBzOi8vZ2l0aHViLmNvbS9pc21heWMvcG53ZmxpZ2h0czE0KQogICAgLSBbUiBwYWNrYWdlIGBueWNmbGlnaHRzMTNgXShodHRwczovL2dpdGh1Yi5jb20vaGFkbGV5L255Y2ZsaWdodHMxMykKLSBCdWlsZGluZyBQZXJtaXRzCiAgICAtIFNlZSBjb2RlIFtoZXJlXShodHRwczovL2dpdGh1Yi5jb20vaGFkbGV5L2J1aWxkaW5nLXBlcm1pdHMpCiAgICAtIFdhdGNoIFlvdVR1YmUgY29kZS10aHJvdWdoIFtoZXJlXShodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PWdvNUF1MDFKcnZzKQotIENvY2t0YWlsIEJhbGFuY2UKICAgIC0gW0RhdGFdKGh0dHBzOi8vZ2l0aHViLmNvbS9rYXJuZXNreS9jb2NrdGFpbC1iYWxhbmNlKQotIE5BU0EgV2VhdGhlcgogICAgLSBbRGF0YV0oaHR0cHM6Ly9naXRodWIuY29tL2hhZGxleS9uYXNhd2VhdGhlcikKLSBTb2NpYWwgU2VjdXJpdHkgQWRtaW5pc3RyYXRpb24gQmFieSBOYW1lcwogICAgLSBbUiBwYWNrYWdlIGBiYWJ5bmFtZXNgXShodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvYmFieW5hbWVzL2luZGV4Lmh0bWwpCiAgICAtIEZvbGxvdyBKdWxpYSBTaWxnZSAqJ015IEJhYnkgQm9vbWVyIE5hbWUgTWlnaHQgSGF2ZSBCZWVuICJEZWJiaWUiJyo6IGh0dHBzOi8vanVsaWFzaWxnZS5jb20vYmxvZy9teS1iYWJ5LWJvb21lci1uYW1lLwogICAgLSBGb2xsb3cgSGlsYXJ5IFBhcmtlcjogKkhpbGFyeTogVGhlIE1vc3QgUG9pc29uZWQgQmFieSBOYW1lIGluIFVTIEhpc3RvcnkqOiBodHRwczovL2hpbGFyeXBhcmtlci5jb20vMjAxMy8wMS8zMC9oaWxhcnktdGhlLW1vc3QtcG9pc29uZWQtYmFieS1uYW1lLWluLXVzLWhpc3RvcnkvCi0gWW91dGggQmVoYXZpb3IgUmlzayBTdXJ2ZWlsbGFuY2UgU3lzdGVtCiAgICAtIFtSIHBhY2thZ2UgYHlyYnNzYF0oaHR0cHM6Ly9naXRodWIuY29tL2hhZGxleS95cmJzcykKICAgIC0gU29tZSBbZ29vZCBpZGVhcyBoZXJlXShodHRwczovL3d3dy5jZGMuZ292L25jaGhzdHAvbmV3c3Jvb20vMjAxMi95cmJzLWdyYXBoaWNzMjAxMi5odG1sKQotIEd1biBzYWxlcwogICAgLSBbRGF0YV0oaHR0cHM6Ly9naXRodWIuY29tL2hhZGxleS9ndW4tc2FsZXMpCiAgICAtIFNvbWUgW2V4YW1wbGUgcGxvdHMgaGVyZV0oaHR0cHM6Ly9naXRodWIuY29tL05ZVGltZXMvZ3Vuc2FsZXMvYmxvYi9tYXN0ZXIvb3V0L3Bsb3RzLnBkZikKLSBHYXBtaW5kZXIKICAgIC0gW1IgcGFja2FnZSBgZ2FwbWluZGVyYF0oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvd2ViL3BhY2thZ2VzL2dhcG1pbmRlci9pbmRleC5odG1sKQogICAgLSBTb21lIFtleGFtcGxlIHBsb3RzIGhlcmVdKGh0dHBzOi8vZ2l0aHViLmNvbS9qZW5ueWJjL2dncGxvdDItdHV0b3JpYWwvYmxvYi9tYXN0ZXIvZ2FwbWluZGVyLWdncGxvdDItc2NhdHRlcnBsb3QubWQpCgoKCgo=</div>
<p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="by-nc.png" width="133" height="25"/></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("03-colors.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
